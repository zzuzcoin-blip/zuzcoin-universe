<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZUZIM UNIVERSE | Talmudic Crypto Exchange</title>
    
    <!-- Favicon ZUZCOIN -->
    <link rel="icon" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgdmlld0JveD0iMCAwIDMyIDMyIj4KICAgIDxjaXJjbGUgY3g9IjE2IiBjeT0iMTYiIHI9IjE0IiBmaWxsPSIjMDAwMDAwIiBzdHJva2U9IiNGRkQ3MDAiIHN0cm9rZS13aWR0aD0iYiIvPgogICAgPHRleHQgeD0iMTYiIHk9IjIwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmaWxsPSIjRkZENzAwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIj5aPC90ZXh0Pgo8L3N2Zz4=" type="image/svg+xml">
    
    <!-- Стили -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;500;700;900&display=swap" rel="stylesheet">
    
    <style>
        /* ============= ОСНОВНЫЕ СТИЛИ ============= */
        :root {
            --exchange-bg: #0a1525;
            --primary: #0e1a2d;
            --secondary: #1a2b44;
            --accent: #00c3ff;
            --positive: #00d18c;
            --negative: #ff4d4d;
            --text: #ffffff;
            --text-secondary: #94a3b8;
            --border: #2a3b54;
            --card-bg: rgba(20, 30, 48, 0.85);
            --gold: #FFD700;
            --talmud-gold: #D4AF37;
            --lion-fire: #FF6B35;
            --lead-vessel: #8B4513;
            --zuz-purple: #8A2BE2;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
        }
        
        body {
            background: var(--exchange-bg);
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        html, body {
            overflow-x: hidden;
            width: 100%;
            scroll-behavior: smooth;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
            width: 100%;
        }
        
        /* ============= МОБИЛЬНАЯ АДАПТАЦИЯ ============= */
        @media (max-width: 1200px) {
            .container { padding: 0 15px; }
            .main-grid { grid-template-columns: 1fr !important; }
            .orderbook-grid { grid-template-columns: 1fr !important; }
            .philosophy-grid { grid-template-columns: 1fr !important; }
        }
        
        @media (max-width: 768px) {
            .container { padding: 0 10px; }
            .header { flex-direction: column; gap: 15px; padding: 15px 0; }
            .nav { width: 100%; justify-content: center; flex-wrap: wrap; gap: 8px; }
            .nav a { padding: 6px 12px; font-size: 14px; }
            .logo { width: 100%; justify-content: center; }
            .wallet-section { width: 100%; justify-content: center; }
            .balance-container { flex-direction: column; width: 100%; padding: 10px; }
            .functional-grid { grid-template-columns: 1fr !important; }
            .features-grid { grid-template-columns: 1fr !important; }
            .section-header { flex-direction: column; gap: 15px; }
            .tab-container { flex-direction: column; }
            .tab { width: 100%; }
            .modal-content { padding: 20px; width: 95%; max-height: 90vh; }
            .philosophy-content { padding: 30px; }
            .transformation-diagram { flex-direction: column; height: auto !important; }
            .transformation-step { width: 100% !important; margin-bottom: 20px; }
            .trading-pairs { grid-template-columns: 1fr !important; }
            .exchange-stats { flex-direction: column; gap: 15px; }
            .philosophy-title { font-size: 32px !important; }
            .story-title { font-size: 24px !important; }
        }
        
        @media (max-width: 480px) {
            .container { padding: 0 5px; }
            .nav a { padding: 5px 8px; font-size: 12px; }
            .wallet-btn { padding: 10px 15px; font-size: 14px; }
            .coin-icon { width: 40px; height: 40px; font-size: 20px; }
            .exchange-title { font-size: 24px !important; }
            .philosophy-title { font-size: 24px !important; }
        }
        
        /* ============= ШАПКА БИРЖИ ============= */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            background: rgba(10, 21, 37, 0.95);
            backdrop-filter: blur(10px);
            position: sticky;
            top: 0;
            z-index: 1000;
            flex-wrap: wrap;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
            cursor: pointer;
            transition: all 0.3s;
            padding: 5px 10px;
            border-radius: 10px;
        }
        
        .logo:hover {
            background: rgba(212, 175, 55, 0.1);
            transform: translateY(-2px);
        }
        
        .logo-text {
            display: flex;
            flex-direction: column;
            line-height: 1.2;
        }
        
        .exchange-title {
            font-size: 28px;
            font-weight: 900;
            color: var(--talmud-gold);
            letter-spacing: 0.5px;
            text-shadow: 0 2px 4px rgba(212, 175, 55, 0.3);
            font-family: 'Rubik', sans-serif;
        }
        
        .exchange-subtitle {
            font-size: 12px;
            color: var(--text-secondary);
            font-weight: 500;
            letter-spacing: 1.5px;
            text-transform: uppercase;
        }
        
        .nav {
            display: flex;
            gap: 25px;
            flex-wrap: wrap;
        }
        
        .nav a {
            color: var(--text-secondary);
            text-decoration: none;
            padding: 10px 20px;
            border-radius: 8px;
            transition: all 0.3s;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            white-space: nowrap;
        }
        
        .nav a:hover, .nav a.active {
            background: var(--secondary);
            color: var(--text);
        }
        
        .wallet-section {
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: flex-end;
        }
        
        .wallet-btn {
            background: linear-gradient(135deg, var(--accent), #0099cc);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
            transition: all 0.3s;
            white-space: nowrap;
        }
        
        .wallet-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 195, 255, 0.4);
        }
        
        .wallet-btn.connected {
            background: var(--positive);
        }
        
        .wallet-btn.disconnecting {
            background: var(--negative);
        }
        
        .balance-container {
            display: flex;
            gap: 20px;
            background: rgba(20, 30, 48, 0.8);
            padding: 12px 20px;
            border-radius: 10px;
            opacity: 0;
            transform: translateY(-20px);
            transition: all 0.5s ease;
            border: 1px solid rgba(255, 255, 255, 0.1);
            flex-wrap: wrap;
        }
        
        .balance-container.show {
            opacity: 1;
            transform: translateY(0);
        }
        
        .balance-item {
            text-align: center;
        }
        
        .balance-label {
            font-size: 12px;
            color: var(--text-secondary);
        }
        
        .balance-value {
            font-size: 14px;
            font-weight: 600;
        }
        
        .balance-value.eth {
            color: #627eea;
        }
        
        .balance-value.zuz {
            color: var(--gold);
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        /* ============= БИРЖЕВОЙ БАННЕР ============= */
        .exchange-hero {
            background: linear-gradient(135deg, rgba(10, 21, 37, 0.9), rgba(20, 30, 48, 0.9));
            border-radius: 20px;
            padding: 30px;
            margin: 25px 0;
            border: 1px solid rgba(212, 175, 55, 0.2);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        .exchange-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .exchange-stats {
            display: flex;
            gap: 30px;
            flex-wrap: wrap;
        }
        
        .stat-item {
            text-align: center;
            padding: 15px 25px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            border: 1px solid rgba(212, 175, 55, 0.1);
        }
        
        .stat-value {
            font-size: 24px;
            font-weight: 700;
            color: var(--talmud-gold);
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 12px;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        /* ============= ТОРГОВАЯ ПЛОЩАДКА ============= */
        .main-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 25px;
            margin: 20px 0;
        }
        
        .chart-container {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 25px;
            height: 550px;
            position: relative;
            overflow: hidden;
        }
        
        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .pair-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .pair-name {
            font-size: 28px;
            font-weight: 700;
            color: var(--text);
        }
        
        .pair-price {
            font-size: 32px;
            font-weight: 900;
            color: var(--positive);
        }
        
        .price-change {
            font-size: 16px;
            padding: 5px 12px;
            border-radius: 6px;
            font-weight: 600;
        }
        
        .price-change.positive {
            background: rgba(0, 209, 140, 0.2);
            color: var(--positive);
        }
        
        .price-change.negative {
            background: rgba(255, 77, 77, 0.2);
            color: var(--negative);
        }
        
        .trading-panel {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 25px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .orderbook-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 25px;
        }
        
        .orderbook {
            background: rgba(20, 30, 48, 0.6);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .orderbook-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .orderbook-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--text);
        }
        
        .order-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            font-size: 14px;
        }
        
        .order-price.bid { color: var(--positive); }
        .order-price.ask { color: var(--negative); }
        
        .trading-pairs {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 25px;
        }
        
        .pair-card {
            background: rgba(20, 30, 48, 0.6);
            border-radius: 12px;
            padding: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .pair-card:hover {
            border-color: var(--talmud-gold);
            transform: translateY(-2px);
        }
        
        /* ============= МОДАЛЬНОЕ ОКНО ФИЛОСОФИИ ============= */
        .philosophy-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 20px;
            overflow-y: auto;
        }
        
        .philosophy-modal.active {
            display: flex;
            animation: fadeIn 0.3s ease;
        }
        
        .philosophy-content {
            background: linear-gradient(135deg, #0a1525, #14213d);
            border-radius: 25px;
            padding: 50px;
            width: 90%;
            max-width: 1200px;
            max-height: 90vh;
            overflow-y: auto;
            border: 3px solid var(--talmud-gold);
            box-shadow: 0 30px 80px rgba(0, 0, 0, 0.8);
            position: relative;
        }
        
        .philosophy-close {
            position: absolute;
            top: 25px;
            right: 25px;
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 28px;
            cursor: pointer;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.3s;
        }
        
        .philosophy-close:hover {
            color: var(--text);
            background: rgba(255, 255, 255, 0.1);
        }
        
        .philosophy-hero {
            text-align: center;
            margin-bottom: 50px;
            padding-bottom: 30px;
            border-bottom: 2px solid rgba(212, 175, 55, 0.3);
        }
        
        .philosophy-title {
            font-size: 48px;
            font-weight: 900;
            color: var(--talmud-gold);
            margin-bottom: 20px;
            font-family: 'Rubik', sans-serif;
            text-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
        }
        
        .philosophy-subtitle {
            font-size: 20px;
            color: var(--text-secondary);
            line-height: 1.6;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .talmud-story {
            background: rgba(212, 175, 55, 0.1);
            border-left: 5px solid var(--talmud-gold);
            padding: 30px;
            margin: 40px 0;
            border-radius: 0 15px 15px 0;
        }
        
        .story-title {
            font-size: 32px;
            color: var(--talmud-gold);
            margin-bottom: 20px;
            font-family: 'Rubik', sans-serif;
        }
        
        .story-content {
            font-size: 18px;
            line-height: 1.8;
            color: var(--text);
            margin-bottom: 25px;
        }
        
        .hebrew-quote {
            font-family: 'Rubik', sans-serif;
            font-size: 24px;
            color: var(--talmud-gold);
            text-align: right;
            direction: rtl;
            margin: 30px 0;
            padding: 25px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            border-right: 4px solid var(--talmud-gold);
        }
        
        .philosophy-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin: 50px 0;
        }
        
        .philosophy-card {
            background: rgba(26, 43, 68, 0.7);
            border-radius: 20px;
            padding: 30px;
            border: 2px solid rgba(212, 175, 55, 0.2);
            transition: all 0.3s;
            height: 100%;
        }
        
        .philosophy-card:hover {
            transform: translateY(-5px);
            border-color: var(--talmud-gold);
            box-shadow: 0 15px 35px rgba(212, 175, 55, 0.2);
        }
        
        .card-icon {
            font-size: 48px;
            color: var(--talmud-gold);
            margin-bottom: 25px;
            text-align: center;
        }
        
        .card-title {
            font-size: 24px;
            color: var(--text);
            margin-bottom: 15px;
            text-align: center;
            font-weight: 700;
        }
        
        .card-text {
            color: var(--text-secondary);
            line-height: 1.7;
            font-size: 16px;
            text-align: center;
        }
        
        .transformation-diagram {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 50px 0;
            height: 350px;
            position: relative;
        }
        
        .transformation-step {
            flex: 1;
            text-align: center;
            padding: 20px;
            position: relative;
            z-index: 2;
        }
        
        .step-icon {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 48px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
            transition: transform 0.3s;
            border: 4px solid;
        }
        
        .step-icon.lion {
            background: linear-gradient(135deg, var(--lion-fire), #FF4500);
            border-color: var(--lion-fire);
            color: white;
        }
        
        .step-icon.vessel {
            background: linear-gradient(135deg, var(--lead-vessel), #A0522D);
            border-color: var(--lead-vessel);
            color: white;
        }
        
        .step-icon.zuz {
            background: linear-gradient(135deg, var(--talmud-gold), #B8860B);
            border-color: var(--talmud-gold);
            color: black;
        }
        
        .step-icon:hover {
            transform: scale(1.1);
        }
        
        .step-title {
            font-size: 24px;
            font-weight: 700;
            color: var(--text);
            margin-bottom: 15px;
        }
        
        .step-description {
            color: var(--text-secondary);
            line-height: 1.6;
            font-size: 16px;
            max-width: 300px;
            margin: 0 auto;
        }
        
        .arrow {
            font-size: 48px;
            color: var(--talmud-gold);
            margin: 0 30px;
        }
        
        .modern-application {
            background: linear-gradient(135deg, rgba(0, 195, 255, 0.1), rgba(212, 175, 55, 0.1));
            border-radius: 20px;
            padding: 40px;
            margin: 50px 0;
            border: 2px solid rgba(212, 175, 55, 0.3);
        }
        
        .application-title {
            font-size: 36px;
            color: var(--talmud-gold);
            margin-bottom: 30px;
            text-align: center;
            font-weight: 700;
        }
        
        .application-item {
            margin-bottom: 25px;
            padding-left: 20px;
            border-left: 3px solid var(--talmud-gold);
        }
        
        .application-item h4 {
            color: var(--text);
            margin-bottom: 10px;
            font-size: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .application-item p {
            color: var(--text-secondary);
            line-height: 1.6;
        }
        
        /* ============= ОБЫЧНЫЕ МОДАЛЬНЫЕ ОКНА ============= */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .modal-overlay.active {
            display: flex;
            animation: fadeIn 0.3s ease;
        }
        
        .modal-content {
            background: var(--primary);
            border-radius: 20px;
            padding: 40px;
            width: 90%;
            max-width: 500px;
            border: 2px solid var(--border);
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
            animation: slideUp 0.3s ease;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }
        
        .modal-title {
            font-size: 24px;
            font-weight: 700;
            color: white;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .close-modal {
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 24px;
            cursor: pointer;
            transition: color 0.3s;
        }
        
        .close-modal:hover {
            color: var(--text);
        }
        
        .wallet-options {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .wallet-option {
            background: var(--secondary);
            border: 2px solid transparent;
            border-radius: 15px;
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .wallet-option:hover {
            border-color: var(--accent);
            transform: translateY(-3px);
        }
        
        .wallet-icon {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }
        
        .wallet-info {
            flex-grow: 1;
        }
        
        .wallet-name {
            font-weight: 600;
            font-size: 18px;
        }
        
        .wallet-desc {
            font-size: 14px;
            color: var(--text-secondary);
        }
        
        /* ============= ФУНКЦИОНАЛЬНЫЕ СЕКЦИИ ============= */
        .functional-sections {
            margin: 40px 0;
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .section-title {
            font-size: 32px;
            color: var(--text);
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .action-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .action-btn {
            background: var(--secondary);
            border: 2px solid transparent;
            color: var(--text);
            padding: 12px 24px;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
            white-space: nowrap;
        }
        
        .action-btn:hover {
            transform: translateY(-2px);
            border-color: var(--accent);
            box-shadow: 0 5px 15px rgba(0, 195, 255, 0.3);
        }
        
        .action-btn.primary {
            background: var(--accent);
            color: white;
        }
        
        .action-btn.success {
            background: var(--positive);
            color: white;
        }
        
        .action-btn.warning {
            background: var(--negative);
            color: white;
        }
        
        .functional-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin-bottom: 50px;
        }
        
        /* ============= КАРТОЧКИ ============= */
        .feature-card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 30px;
            border: 2px solid var(--border);
            transition: all 0.3s;
            height: 100%;
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
            border-color: var(--accent);
            box-shadow: 0 15px 35px rgba(0, 195, 255, 0.2);
        }
        
        .feature-icon {
            width: 70px;
            height: 70px;
            background: linear-gradient(135deg, var(--accent), #0099cc);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
            color: white;
            margin-bottom: 25px;
        }
        
        .feature-title {
            font-size: 24px;
            font-weight: 700;
            color: var(--text);
            margin-bottom: 15px;
        }
        
        .feature-description {
            color: var(--text-secondary);
            line-height: 1.7;
            font-size: 16px;
            margin-bottom: 20px;
        }
        
        /* ============= ЛОГОТИП ============= */
        .coin-icon {
            width: 60px;
            height: 60px;
            background: #000000;
            border: 3px solid var(--talmud-gold);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--talmud-gold);
            font-size: 32px;
            font-weight: 900;
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.5);
            flex-shrink: 0;
            transition: all 0.3s;
        }
        
        .logo:hover .coin-icon {
            transform: rotate(15deg);
            box-shadow: 0 0 30px rgba(212, 175, 55, 0.7);
        }
        
        .small-coin-icon {
            width: 24px;
            height: 24px;
            background: #000000;
            border: 1px solid var(--talmud-gold);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--talmud-gold);
            font-size: 14px;
            font-weight: bold;
            flex-shrink: 0;
        }
        
        /* ============= АНИМАЦИИ ============= */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* ============= ФОРМЫ ============= */
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            color: var(--text-secondary);
            font-weight: 500;
        }
        
        .form-input {
            width: 100%;
            padding: 12px 16px;
            background: var(--secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text);
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .form-input:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(0, 195, 255, 0.1);
        }
        
        .form-select {
            width: 100%;
            padding: 12px 16px;
            background: var(--secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text);
            font-size: 16px;
            cursor: pointer;
        }
        
        .form-textarea {
            width: 100%;
            padding: 12px 16px;
            background: var(--secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text);
            font-size: 16px;
            resize: vertical;
            min-height: 120px;
        }
        
        /* ============= КНОПКИ ============= */
        .btn-buy {
            background: var(--positive);
            color: white;
            border: none;
            padding: 16px;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s;
            width: 100%;
        }
        
        .btn-buy:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 209, 140, 0.4);
        }
        
        .btn-sell {
            background: var(--negative);
            color: white;
            border: none;
            padding: 16px;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s;
            width: 100%;
        }
        
        .btn-sell:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 77, 77, 0.4);
        }
        
        .tab-container {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .tab {
            flex: 1;
            padding: 12px;
            background: var(--secondary);
            border: none;
            border-radius: 8px;
            color: var(--text-secondary);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .tab:hover {
            background: rgba(0, 195, 255, 0.1);
            color: var(--accent);
        }
        
        .tab.active {
            background: var(--accent);
            color: white;
        }
        
        /* ============= DEX БАННЕР ============= */
        .real-dex-banner {
            background: linear-gradient(135deg, rgba(0, 209, 140, 0.2), rgba(212, 175, 55, 0.2));
            border: 2px solid rgba(212, 175, 55, 0.3);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            font-size: 18px;
            font-weight: 600;
            color: var(--text);
            animation: pulse 2s infinite;
        }
        
        .banner-coin-icon {
            width: 40px;
            height: 40px;
            background: #000000;
            border: 2px solid var(--talmud-gold);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--talmud-gold);
            font-size: 20px;
            font-weight: 900;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(212, 175, 55, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(212, 175, 55, 0); }
            100% { box-shadow: 0 0 0 0 rgba(212, 175, 55, 0); }
        }
    </style>
</head>
<body>
    <!-- МОДАЛЬНОЕ ОКНО ФИЛОСОФИИ ZUZ -->
    <div class="philosophy-modal" id="philosophyModal">
        <div class="philosophy-content">
            <button class="philosophy-close" onclick="closePhilosophy()">&times;</button>
            
            <div class="philosophy-hero">
                <h1 class="philosophy-title">ZUZIM Философия: Трансформация Энергии Вселенной</h1>
                <p class="philosophy-subtitle">
                    Древняя мудрость Талмуда встречает современную криптобиржу.<br>
                    Преобразуем природную энергию в созидательную финансовую силу.
                </p>
            </div>
            
            <!-- История из Талмуда -->
            <div class="talmud-story">
                <h2 class="story-title">Талмуд, Сукка 52а: История о Злом Начале</h2>
                
                <p class="story-content">
                    <strong>В древние времена мудрецы поймали Иецер ха-Ра (Злое начало) и заперли его в железный сосуд.</strong><br><br>
                    
                    Но вскоре они обнаружили, что с исчезновением Иецер ха-Ра перестала существовать вся хозяйственная и социальная жизнь:
                    не строились дома, не заключались браки, не рождались дети, не велась торговля.<br><br>
                    
                    Тогда они поняли: <em>Иецер ха-Ра — это не просто "зло", а фундаментальная движущая сила мира.</em>
                </p>
                
                <div class="hebrew-quote">
                    "יצר הרע, שנאסר בכד עופרת, עם שחר הפך לשני זוזים"
                </div>
                
                <p class="story-content">
                    <strong>Человек поймал Иецер ха-Ра, который выглядел как огненный лев.</strong><br>
                    Он запер его в свинцовый сосуд, надеясь усмирить дикую энергию.<br><br>
                    
                    <strong>На следующее утро</strong>, открыв сосуд, он обнаружил не льва, а две монеты — два <em>зузима</em>.<br><br>
                    
                    Мудрецы объяснили: <em>"Вот он, истинный Иецер ха-Ра! Его энергия не исчезла, а трансформировалась 
                    в стремление к созиданию, торговле, строительству."</em>
                </p>
            </div>
            
            <!-- Диаграмма трансформации -->
            <div class="transformation-diagram">
                <div class="transformation-step">
                    <div class="step-icon lion">
                        <i class="fas fa-fire"></i>
                    </div>
                    <h3 class="step-title">Иецер ха-Ра<br>Огненный лев</h3>
                    <p class="step-description">
                        Природная, необузданная энергия человека.<br>
                        Источник страсти, амбиций, творческой силы.
                    </p>
                </div>
                
                <div class="arrow">
                    <i class="fas fa-arrow-right"></i>
                </div>
                
                <div class="transformation-step">
                    <div class="step-icon vessel">
                        <i class="fas fa-flask"></i>
                    </div>
                    <h3 class="step-title">Свинцовый<br>Сосуд</h3>
                    <p class="step-description">
                        Цивилизация направляет дикую энергию<br>
                        в созидательное, контролируемое русло.
                    </p>
                </div>
                
                <div class="arrow">
                    <i class="fas fa-arrow-right"></i>
                </div>
                
                <div class="transformation-step">
                    <div class="step-icon zuz">
                        <i class="fas fa-coins"></i>
                    </div>
                    <h3 class="step-title">Два Зузима<br>Монеты</h3>
                    <p class="step-description">
                        Энергия становится инструментом<br>
                        для торговли, строительства, развития общества.
                    </p>
                </div>
            </div>
            
            <!-- Ключевые принципы -->
            <div class="philosophy-grid">
                <div class="philosophy-card">
                    <div class="card-icon">
                        <i class="fas fa-balance-scale"></i>
                    </div>
                    <h3 class="card-title">Двойственность Энергии</h3>
                    <p class="card-text">
                        Иецер ха-Ра амбивалентен: с одной стороны — источник жадности и ревности, 
                        с другой — движущая сила прогресса, семьи, культуры. Без него мир бы замер.
                    </p>
                </div>
                
                <div class="philosophy-card">
                    <div class="card-icon">
                        <i class="fas fa-exchange-alt"></i>
                    </div>
                    <h3 class="card-title">Трансформация</h3>
                    <p class="card-text">
                        Задача не в уничтожении энергии, а в её направлении. 
                        Как дикий лев превращается в зузим, так страсть должна стать 
                        силой созидания и развития.
                    </p>
                </div>
                
                <div class="philosophy-card">
                    <div class="card-icon">
                        <i class="fas fa-hands-helping"></i>
                    </div>
                    <h3 class="card-title">Благотворительность как Обязательство</h3>
                    <p class="card-text">
                        1% от каждой транзакции на ZUZIM UNIVERSE автоматически идёт 
                        на благотворительность. Это современное воплощение "цдаки" — 
                        использования материального для духовного роста.
                    </p>
                </div>
            </div>
            
            <!-- Современное применение -->
            <div class="modern-application">
                <h2 class="application-title">ZUZIM в Цифровую Эпоху: Блокчейн как Новый "Сосуд"</h2>
                
                <div class="application-item">
                    <h4><i class="fas fa-bolt"></i> Блокчейн — Современный Свинцовый Сосуд</h4>
                    <p>Технология блокчейн становится тем самым сосудом, который трансформирует 
                    природную энергию в созидательную финансовую систему. Децентрализация, 
                    прозрачность и безопасность — вот новые инструменты цивилизации.</p>
                </div>
                
                <div class="application-item">
                    <h4><i class="fas fa-chart-line"></i> Криптобиржа ZUZIM UNIVERSE</h4>
                    <p>Наша биржа — не просто площадка для торговли. Это пространство, где 
                    энергия Иецер ха-Ра направляется в этичное, созидательное русло. 
                    Каждая сделка здесь — шаг к трансформации энергии.</p>
                </div>
                
                <div class="application-item">
                    <h4><i class="fas fa-hand-holding-heart"></i> Автоматическая Благотворительность</h4>
                    <p>1% от каждой транзакции автоматически направляется на благотворительные 
                    проекты. Торговля становится актом созидания — современной формой "цдаки", 
                    где финансовая деятельность несёт духовную ценность.</p>
                </div>
                
                <div class="application-item">
                    <h4><i class="fas fa-shield-alt"></i> Доверие через Технологию</h4>
                    <p>Digital Notary (Цифровой Нотариус) использует неизменность блокчейна 
                    для создания доверия. ProofChain отслеживает каждое пожертвование. 
                    Технология служит этическим целям.</p>
                </div>
                
                <div class="application-item">
                    <h4><i class="fas fa-industry"></i> Token Factory — Созидание через Творчество</h4>
                    <p>Создавайте свои токены с встроенной благотворительной составляющей. 
                    Каждый новый токен — возможность направить энергию созидания в новые проекты.</p>
                </div>
            </div>
            
            <!-- Заключение -->
            <div class="talmud-story" style="margin-top: 50px; background: rgba(0, 195, 255, 0.1); border-left-color: var(--accent);">
                <h2 class="story-title" style="color: var(--accent);">Миссия ZUZIM UNIVERSE</h2>
                
                <p class="story-content">
                    <strong>Мы создаём не просто криптобиржу. Мы создаём пространство трансформации.</strong><br><br>
                    
                    Где дикая энергия Иецер ха-Ра, подобно огненному льву из Талмуда, 
                    находит свой "свинцовый сосуд" в технологии блокчейн и превращается 
                    в "зузим" — инструмент созидания, развития и помощи.<br><br>
                    
                    <em>Каждая транзакция на ZUZIM UNIVERSE — это не просто обмен ценностями. 
                    Это акт трансформации энергии, шаг к более осознанному и этичному 
                    использованию наших природных стремлений.</em><br><br>
                    
                    Присоединяйтесь к нам в этом путешествии от энергии к созиданию, 
                    от страсти к цели, от зузима Талмуда к ZUZIM блокчейна.
                </p>
            </div>
        </div>
    </div>

    <!-- МОДАЛЬНЫЕ ОКНА КОШЕЛЬКОВ И ФУНКЦИЙ -->
    <div class="modal-overlay" id="walletModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">
                    <div class="coin-icon" style="width: 40px; height: 40px; font-size: 20px; display: inline-flex; margin-right: 10px;">Z</div>
                    Connect Wallet to ZUZIM UNIVERSE
                </div>
                <button class="close-modal" onclick="closeModal('walletModal')">&times;</button>
            </div>
            
            <div class="wallet-options">
                <div class="wallet-option" onclick="connectWallet('metamask')">
                    <div class="wallet-icon" style="color: #627eea;">
                        <i class="fab fa-ethereum"></i>
                    </div>
                    <div class="wallet-info">
                        <div class="wallet-name">MetaMask</div>
                        <div class="wallet-desc">Most popular Web3 wallet</div>
                    </div>
                    <div><i class="fas fa-chevron-right"></i></div>
                </div>
                
                <div class="wallet-option" onclick="connectWallet('trustwallet')">
                    <div class="wallet-icon" style="color: #3375bb;">
                        <i class="fas fa-wallet"></i>
                    </div>
                    <div class="wallet-info">
                        <div class="wallet-name">Trust Wallet</div>
                        <div class="wallet-desc">Secure mobile wallet</div>
                    </div>
                    <div><i class="fas fa-chevron-right"></i></div>
                </div>
                
                <div class="wallet-option" onclick="connectWallet('coinbase')">
                    <div class="wallet-icon" style="color: #0052ff;">
                        <i class="fab fa-bitcoin"></i>
                    </div>
                    <div class="wallet-info">
                        <div class="wallet-name">Coinbase Wallet</div>
                        <div class="wallet-desc">Exchange integrated wallet</div>
                    </div>
                    <div><i class="fas fa-chevron-right"></i></div>
                </div>
            </div>
            
            <div style="text-align: center; margin-top: 30px; color: var(--text-secondary); font-size: 14px;">
                <i class="fas fa-lock"></i> Your wallet connection is secure and private
            </div>
        </div>
    </div>

    <!-- Token Factory Modal -->
    <div class="modal-overlay" id="tokenFactoryModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">
                    <i class="fas fa-industry" style="color: var(--positive);"></i>
                    Create Charity Token
                </div>
                <button class="close-modal" onclick="closeModal('tokenFactoryModal')">&times;</button>
            </div>
            
            <div class="form-group">
                <label class="form-label">Token Name</label>
                <input type="text" class="form-input" id="tokenName" placeholder="e.g., CharityCoin">
            </div>
            
            <div class="form-group">
                <label class="form-label">Token Symbol</label>
                <input type="text" class="form-input" id="tokenSymbol" placeholder="e.g., CHARITY">
            </div>
            
            <div class="form-group">
                <label class="form-label">Total Supply</label>
                <input type="number" class="form-input" id="totalSupply" placeholder="e.g., 1000000">
            </div>
            
            <div class="form-group">
                <label class="form-label">Charity Percentage (%)</label>
                <select class="form-select" id="charityPercentage">
                    <option value="1">1% - Standard ZUZIM</option>
                    <option value="2">2%</option>
                    <option value="5">5% - High Impact</option>
                    <option value="10">10% - Maximum Charity</option>
                </select>
            </div>
            
            <button class="action-btn primary" style="width: 100%; margin-top: 20px;" onclick="createToken()">
                <i class="fas fa-plus-circle"></i> Create Token with Charity
            </button>
            
            <div style="text-align: center; margin-top: 20px; color: var(--text-secondary); font-size: 14px;">
                <i class="fas fa-info-circle"></i> 1% of creation fee goes to charity
            </div>
        </div>
    </div>

    <!-- Digital Notary Modal -->
    <div class="modal-overlay" id="notaryModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">
                    <i class="fas fa-file-contract" style="color: var(--accent);"></i>
                    Digital Notary
                </div>
                <button class="close-modal" onclick="closeModal('notaryModal')">&times;</button>
            </div>
            
            <div class="form-group">
                <label class="form-label">Document Title</label>
                <input type="text" class="form-input" id="documentTitle" placeholder="e.g., Contract Agreement">
            </div>
            
            <div class="form-group">
                <label class="form-label">Document Description</label>
                <textarea class="form-textarea" id="documentDescription" placeholder="Describe your document..."></textarea>
            </div>
            
            <div class="form-group">
                <label class="form-label">Upload Document</label>
                <input type="file" class="form-input" id="documentFile" accept=".pdf,.doc,.docx,.txt">
            </div>
            
            <div style="display: flex; gap: 10px; margin-top: 20px;">
                <button class="action-btn" style="flex: 1;" onclick="notarizeDocument()">
                    <i class="fas fa-upload"></i> Notarize
                </button>
                <button class="action-btn success" style="flex: 1;" onclick="verifyDocument()">
                    <i class="fas fa-check-circle"></i> Verify
                </button>
            </div>
            
            <div style="text-align: center; margin-top: 20px; color: var(--text-secondary); font-size: 14px;">
                <i class="fas fa-shield-alt"></i> Stored permanently on blockchain
            </div>
        </div>
    </div>

    <!-- ProofChain Modal -->
    <div class="modal-overlay" id="proofchainModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">
                    <i class="fas fa-link" style="color: var(--talmud-gold);"></i>
                    ProofChain Ecosystem
                </div>
                <button class="close-modal" onclick="closeModal('proofchainModal')">&times;</button>
            </div>
            
            <div style="text-align: center; margin: 30px 0;">
                <div class="coin-icon" style="width: 80px; height: 80px; font-size: 40px; margin: 0 auto 20px;">Z</div>
                <h3 style="color: var(--text); margin-bottom: 10px;">ZUZIM Charity Tracking</h3>
                <p style="color: var(--text-secondary);">Every transaction helps make the world better</p>
            </div>
            
            <div style="background: rgba(212, 175, 55, 0.1); border-radius: 10px; padding: 20px; margin: 20px 0;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                    <span style="color: var(--text-secondary);">Total Donations:</span>
                    <span style="color: var(--talmud-gold); font-weight: 600;">$42,819</span>
                </div>
                <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                    <span style="color: var(--text-secondary);">Projects Funded:</span>
                    <span style="color: var(--talmud-gold); font-weight: 600;">127</span>
                </div>
                <div style="display: flex; justify-content: space-between;">
                    <span style="color: var(--text-secondary);">Community Votes:</span>
                    <span style="color: var(--talmud-gold); font-weight: 600;">8,452</span>
                </div>
            </div>
            
            <button class="action-btn success" style="width: 100%; margin-bottom: 15px;" onclick="viewDonations()">
                <i class="fas fa-hand-holding-heart"></i> View Donations
            </button>
            
            <button class="action-btn primary" style="width: 100%; margin-bottom: 15px;" onclick="voteForCharity()">
                <i class="fas fa-vote-yea"></i> Vote for Charity Projects
            </button>
            
            <button class="action-btn" style="width: 100%;" onclick="viewCharityProjects()">
                <i class="fas fa-list"></i> Browse Projects
            </button>
        </div>
    </div>

    <!-- ОСНОВНОЙ КОНТЕЙНЕР -->
    <div class="container">
        <!-- ШАПКА БИРЖИ -->
        <header class="header">
            <div class="logo" onclick="openPhilosophy()">
                <div class="coin-icon">
                    Z
                </div>
                <div class="logo-text">
                    <span class="exchange-title">ZUZIM UNIVERSE</span>
                    <span class="exchange-subtitle">TALMUDIC CRYPTO EXCHANGE</span>
                </div>
            </div>
            
            <nav class="nav">
                <a href="#" class="active"><i class="fas fa-chart-line"></i> Trade</a>
                <a href="#token-factory"><i class="fas fa-industry"></i> Token Factory</a>
                <a href="#digital-notary"><i class="fas fa-file-contract"></i> Digital Notary</a>
                <a href="#proofchain"><i class="fas fa-link"></i> ProofChain</a>
            </nav>
            
            <div class="wallet-section">
                <div class="balance-container" id="balanceContainer">
                    <div class="balance-item">
                        <div class="balance-label">ETH Balance</div>
                        <div class="balance-value eth" id="ethBalance">0.00 ETH</div>
                    </div>
                    <div class="balance-item">
                        <div class="balance-label">ZUZ Balance</div>
                        <div class="balance-value zuz" id="zuzBalance">
                            <div class="small-coin-icon">Z</div>
                            <span>0 ZUZ</span>
                        </div>
                    </div>
                    <div class="balance-item">
                        <div class="balance-label">Network</div>
                        <div class="balance-value" id="networkName">Not Connected</div>
                    </div>
                </div>
                
                <button class="wallet-btn" id="connectWalletBtn">
                    <i class="fas fa-wallet"></i>
                    <span id="walletBtnText">Connect Wallet</span>
                </button>
            </div>
        </header>

        <!-- БАННЕР ЖИВОГО DEX -->
        <div class="real-dex-banner" id="realDexBanner">
            <div class="banner-coin-icon">Z</div>
            <strong>🚀 ZUZ DEX LIVE!</strong> ZUZ/PYUSD Trading with 1% Auto-Donate
            <div class="banner-coin-icon">Z</div>
        </div>

        <!-- СТАТИСТИКА БИРЖИ -->
        <div class="exchange-hero">
            <div class="exchange-header">
                <h1 style="font-size: 36px; color: var(--text);">
                    <i class="fas fa-exchange-alt" style="color: var(--talmud-gold);"></i>
                    ZUZIM Exchange
                </h1>
                
                <div class="exchange-stats">
                    <div class="stat-item">
                        <div class="stat-value">$2.4M</div>
                        <div class="stat-label">24h Volume</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">42,819</div>
                        <div class="stat-label">Active Traders</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">127</div>
                        <div class="stat-label">Trading Pairs</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">1%</div>
                        <div class="stat-label">Auto-Donate</div>
                    </div>
                </div>
            </div>

            <!-- ОСНОВНАЯ ТОРГОВАЯ ПЛОЩАДКА -->
            <div class="main-grid">
                <!-- ЛЕВАЯ КОЛОНКА: ГРАФИК -->
                <div class="chart-container">
                    <div class="chart-header">
                        <div class="pair-info">
                            <div class="pair-name">ZUZ/PYUSD</div>
                            <div class="pair-price">$0.0961</div>
                            <div class="price-change positive">+2.4%</div>
                        </div>
                        <div style="display: flex; gap: 10px;">
                            <button class="tab" onclick="changeTimeframe('1H')">1H</button>
                            <button class="tab active" onclick="changeTimeframe('1D')">1D</button>
                            <button class="tab" onclick="changeTimeframe('1W')">1W</button>
                            <button class="tab" onclick="changeTimeframe('1M')">1M</button>
                        </div>
                    </div>
                    <div id="tradingview_chart" style="height: calc(100% - 60px);"></div>
                </div>

                <!-- ПРАВАЯ КОЛОНКА: ТОРГОВАЯ ПАНЕЛЬ -->
                <div class="trading-panel">
                    <h3 style="color: var(--text); margin-bottom: 20px; font-size: 20px;">
                        <i class="fas fa-exchange-alt"></i> Trade ZUZ/PYUSD
                    </h3>
                    
                    <div class="tab-container">
                        <button class="tab active" onclick="switchTab('market')">Market</button>
                        <button class="tab" onclick="switchTab('limit')">Limit</button>
                        <button class="tab" onclick="switchTab('stop')">Stop</button>
                    </div>
                    
                    <div id="marketTab" style="display: block;">
                        <div class="form-group">
                            <label class="form-label">Amount (ZUZ)</label>
                            <input type="number" class="form-input" id="amountInput" placeholder="0.00" step="0.01">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Price (PYUSD)</label>
                            <input type="number" class="form-input" id="priceInput" placeholder="0.0961" value="0.0961" step="0.0001">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Total (PYUSD)</label>
                            <input type="number" class="form-input" id="totalInput" placeholder="0.00" readonly>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 25px 0;">
                            <button class="btn-buy" onclick="placeRealOrder('buy')">
                                <i class="fas fa-arrow-up"></i> Buy ZUZ
                            </button>
                            <button class="btn-sell" onclick="placeRealOrder('sell')">
                                <i class="fas fa-arrow-down"></i> Sell ZUZ
                            </button>
                        </div>
                        
                        <div style="text-align: center; color: var(--text-secondary); font-size: 12px; padding: 15px; background: rgba(0, 209, 140, 0.1); border-radius: 8px; border: 1px solid rgba(0, 209, 140, 0.2);">
                            <i class="fas fa-hand-holding-heart"></i> 1% of this trade will be auto-donated to charity
                        </div>
                    </div>
                    
                    <div id="limitTab" style="display: none;">
                        <div class="form-group">
                            <label class="form-label">Limit Price (PYUSD)</label>
                            <input type="number" class="form-input" placeholder="0.0950" step="0.0001">
                        </div>
                        <button class="action-btn primary" style="width: 100%;">Place Limit Order</button>
                    </div>
                    
                    <div id="stopTab" style="display: none;">
                        <div class="form-group">
                            <label class="form-label">Stop Price (PYUSD)</label>
                            <input type="number" class="form-input" placeholder="0.0975" step="0.0001">
                        </div>
                        <button class="action-btn warning" style="width: 100%;">Place Stop Order</button>
                    </div>
                </div>
            </div>

            <!-- СТОЛ ЗАЯВОК -->
            <div class="orderbook-grid">
                <div class="orderbook">
                    <div class="orderbook-header">
                        <div class="orderbook-title">Bids (Buy Orders)</div>
                        <div style="color: var(--text-secondary); font-size: 12px;">Amount</div>
                    </div>
                    <div class="order-rows">
                        <div class="order-row"><span class="order-price bid">0.0965</span><span>12,450 ZUZ</span></div>
                        <div class="order-row"><span class="order-price bid">0.0963</span><span>8,720 ZUZ</span></div>
                        <div class="order-row"><span class="order-price bid">0.0961</span><span>15,300 ZUZ</span></div>
                        <div class="order-row"><span class="order-price bid">0.0959</span><span>6,540 ZUZ</span></div>
                        <div class="order-row"><span class="order-price bid">0.0957</span><span>9,810 ZUZ</span></div>
                    </div>
                </div>
                
                <div class="orderbook">
                    <div class="orderbook-header">
                        <div class="orderbook-title">Asks (Sell Orders)</div>
                        <div style="color: var(--text-secondary); font-size: 12px;">Amount</div>
                    </div>
                    <div class="order-rows">
                        <div class="order-row"><span class="order-price ask">0.0967</span><span>7,890 ZUZ</span></div>
                        <div class="order-row"><span class="order-price ask">0.0969</span><span>11,230 ZUZ</span></div>
                        <div class="order-row"><span class="order-price ask">0.0971</span><span>5,670 ZUZ</span></div>
                        <div class="order-row"><span class="order-price ask">0.0973</span><span>8,910 ZUZ</span></div>
                        <div class="order-row"><span class="order-price ask">0.0975</span><span>4,320 ZUZ</span></div>
                    </div>
                </div>
            </div>

            <!-- ТОРГОВЫЕ ПАРЫ -->
            <div id="pairs" style="margin-top: 40px;">
                <h2 style="color: var(--text); margin-bottom: 20px; font-size: 24px;">
                    <i class="fas fa-list"></i> Trading Pairs
                </h2>
                
                <div class="trading-pairs">
                    <div class="pair-card" onclick="selectPair('ZUZ/PYUSD')">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                            <div style="font-weight: 600; color: var(--text);">ZUZ/PYUSD</div>
                            <div style="color: var(--positive); font-weight: 700;">$0.0961</div>
                        </div>
                        <div style="display: flex; justify-content: space-between; font-size: 14px;">
                            <div style="color: var(--text-secondary);">24h Volume</div>
                            <div style="color: var(--text);">$842,150</div>
                        </div>
                        <div style="display: flex; justify-content: space-between; font-size: 14px;">
                            <div style="color: var(--text-secondary);">Change</div>
                            <div style="color: var(--positive);">+2.4%</div>
                        </div>
                    </div>
                    
                    <div class="pair-card" onclick="selectPair('ZUZ/ETH')">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                            <div style="font-weight: 600; color: var(--text);">ZUZ/ETH</div>
                            <div style="color: var(--negative); font-weight: 700;">0.000042</div>
                        </div>
                        <div style="display: flex; justify-content: space-between; font-size: 14px;">
                            <div style="color: var(--text-secondary);">24h Volume</div>
                            <div style="color: var(--text);">$315,780</div>
                        </div>
                        <div style="display: flex; justify-content: space-between; font-size: 14px;">
                            <div style="color: var(--text-secondary);">Change</div>
                            <div style="color: var(--negative);">-1.2%</div>
                        </div>
                    </div>
                    
                    <div class="pair-card" onclick="selectPair('ETH/PYUSD')">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                            <div style="font-weight: 600; color: var(--text);">ETH/PYUSD</div>
                            <div style="color: var(--positive); font-weight: 700;">$2,285</div>
                        </div>
                        <div style="display: flex; justify-content: space-between; font-size: 14px;">
                            <div style="color: var(--text-secondary);">24h Volume</div>
                            <div style="color: var(--text);">$1.2M</div>
                        </div>
                        <div style="display: flex; justify-content: space-between; font-size: 14px;">
                            <div style="color: var(--text-secondary);">Change</div>
                            <div style="color: var(--positive);">+0.8%</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ФУНКЦИОНАЛЬНЫЕ СЕКЦИИ ЭКОСИСТЕМЫ -->
        <div class="functional-sections">
            <!-- Token Factory -->
            <div id="token-factory">
                <div class="section-header">
                    <h2 class="section-title">
                        <i class="fas fa-industry" style="color: var(--positive);"></i>
                        Token Factory
                    </h2>
                    <div class="action-buttons">
                        <button class="action-btn primary" onclick="openModal('tokenFactoryModal')">
                            <i class="fas fa-plus-circle"></i> Create Charity Token
                        </button>
                        <button class="action-btn" onclick="viewMyTokens()">
                            <i class="fas fa-list"></i> My Tokens
                        </button>
                    </div>
                </div>
                
                <div class="functional-grid">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-coins"></i>
                        </div>
                        <h3 class="feature-title">Create with Charity</h3>
                        <p class="feature-description">
                            Launch your own token with built-in charity mechanism.
                            1-10% of every transaction automatically donated.
                        </p>
                        <button class="action-btn" onclick="openModal('tokenFactoryModal')">
                            <i class="fas fa-rocket"></i> Launch Token
                        </button>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <h3 class="feature-title">Token Analytics</h3>
                        <p class="feature-desc">
                            Track your token performance, donations made, and community growth.
                        </p>
                        <button class="action-btn" onclick="viewTokenAnalytics()">
                            <i class="fas fa-chart-bar"></i> View Analytics
                        </button>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <h3 class="feature-title">Community Tokens</h3>
                        <p class="feature-desc">
                            Browse tokens created by the ZUZIM community.
                            Support projects that give back.
                        </p>
                        <button class="action-btn" onclick="browseCommunityTokens()">
                            <i class="fas fa-search"></i> Browse Tokens
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Digital Notary -->
            <div id="digital-notary">
                <div class="section-header">
                    <h2 class="section-title">
                        <i class="fas fa-file-contract" style="color: var(--accent);"></i>
                        Digital Notary
                    </h2>
                    <div class="action-buttons">
                        <button class="action-btn primary" onclick="openModal('notaryModal')">
                            <i class="fas fa-upload"></i> Upload Document
                        </button>
                        <button class="action-btn" onclick="openModal('notaryModal')">
                            <i class="fas fa-check-circle"></i> Verify Document
                        </button>
                    </div>
                </div>
                
                <div class="functional-grid">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-fingerprint"></i>
                        </div>
                        <h3 class="feature-title">Immutable Proof</h3>
                        <p class="feature-description">
                            Store document fingerprints on blockchain.
                            Permanent, tamper-proof verification.
                        </p>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <h3 class="feature-title">Legal Security</h3>
                        <p class="feature-description">
                            Court-admissible timestamps.
                            Cryptographic proof of existence.
                        </p>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-history"></i>
                        </div>
                        <h3 class="feature-title">Historical Records</h3>
                        <p class="feature-description">
                            Full audit trail of all notarizations.
                            Transparent and verifiable history.
                        </p>
                    </div>
                </div>
            </div>
            
            <!-- ProofChain -->
            <div id="proofchain">
                <div class="section-header">
                    <h2 class="section-title">
                        <i class="fas fa-link" style="color: var(--talmud-gold);"></i>
                        ProofChain Ecosystem
                    </h2>
                    <div class="action-buttons">
                        <button class="action-btn success" onclick="openModal('proofchainModal')">
                            <i class="fas fa-hand-holding-heart"></i> View Donations
                        </button>
                        <button class="action-btn warning" onclick="openModal('proofchainModal')">
                            <i class="fas fa-vote-yea"></i> Community Voting
                        </button>
                    </div>
                </div>
                
                <div class="functional-grid">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-donate"></i>
                        </div>
                        <h3 class="feature-title">Transparent Donations</h3>
                        <p class="feature-description">
                            Every donation tracked on blockchain.
                            See exactly where your 1% goes.
                        </p>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-vote-yea"></i>
                        </div>
                        <h3 class="feature-title">Community Governance</h3>
                        <p class="feature-description">
                            Vote on which charities to support.
                            Democratic decision making.
                        </p>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-leaf"></i>
                        </div>
                        <h3 class="feature-title">Impact Reports</h3>
                        <p class="feature-description">
                            Quarterly reports on charity impact.
                            See the real-world difference you make.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- СКРИПТЫ -->
    <script src="https://unpkg.com/web3@1.7.0/dist/web3.min.js"></script>
    <script src="https://unpkg.com/ethers@5.7.0/dist/ethers.umd.min.js"></script>
    <script src="https://s3.tradingview.com/tv.js"></script>
    
    <script>
        // ============= КОНФИГУРАЦИЯ РЕАЛЬНОГО DEX =============
        const DEX_CONFIG = {
            address: "0x09970975aa48c718e17db4a18128ebf6806e1f2c",
            zuzToken: "0x4284ecC7E6E560cAfc0bA65CbDFc9c19bd2C0bD3",
            pyusdToken: "0xCaC524BcA292aaade2DF8A05cC58F0a65B1B3bB9",
            tradingFee: 0.3,
            charityFee: 1.0
        };
        
        // ABI для DEX
        const DEX_ABI = [
            "function getSwapQuote(address tokenIn, address tokenOut, uint256 amountIn) view returns (uint256 amountOut, uint256 charityAmount)",
            "function swap(address tokenIn, address tokenOut, uint256 amountIn) returns (uint256)",
            "function getReserves(address tokenA, address tokenB) view returns (uint256 reserveA, uint256 reserveB)",
            "function charityWallet() view returns (address)",
            "function totalCharityDonated() view returns (uint256)"
        ];
        
        // ABI для ERC20
        const ERC20_ABI = [
            "function approve(address spender, uint256 amount) returns (bool)",
            "function balanceOf(address account) view returns (uint256)",
            "function decimals() view returns (uint8)",
            "function transfer(address to, uint256 amount) returns (bool)"
        ];
        
        // ============= ГЛОБАЛЬНЫЕ ПЕРЕМЕННЫЕ =============
        let provider = null;
        let signer = null;
        let userAddress = null;
        let isConnected = false;
        let dexContract = null;
        let zuzContract = null;
        let pyusdContract = null;
        
        // ============= ФИЛОСОФИЯ ZUZ =============
        function openPhilosophy() {
            document.getElementById('philosophyModal').classList.add('active');
            document.body.style.overflow = 'hidden';
        }
        
        function closePhilosophy() {
            document.getElementById('philosophyModal').classList.remove('active');
            document.body.style.overflow = 'auto';
        }
        
        // Закрытие по клику вне контента
        document.getElementById('philosophyModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closePhilosophy();
            }
        });
        
        // Закрытие по Escape
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && document.getElementById('philosophyModal').classList.contains('active')) {
                closePhilosophy();
            }
        });
        
        // ============= ПОДКЛЮЧЕНИЕ КОШЕЛЬКА =============
        async function connectWallet(walletType) {
            closeModal('walletModal');
            
            if (walletType === 'metamask') {
                await connectMetaMask();
            } else if (walletType === 'trustwallet') {
                await connectTrustWallet();
            } else if (walletType === 'coinbase') {
                await connectCoinbaseWallet();
            }
        }
        
        async function connectMetaMask() {
            if (typeof window.ethereum === 'undefined') {
                alert("Please install MetaMask!");
                return;
            }
            
            try {
                const accounts = await window.ethereum.request({ 
                    method: 'eth_requestAccounts' 
                });
                
                provider = new ethers.providers.Web3Provider(window.ethereum);
                signer = provider.getSigner();
                userAddress = accounts[0];
                isConnected = true;
                
                updateWalletUI(true);
                await initRealDEX();
                await loadBalances();
                
                console.log("✅ MetaMask connected:", userAddress);
                
                // Показываем баннер DEX
                document.getElementById('realDexBanner').style.display = 'flex';
                
            } catch (error) {
                console.error("Error connecting MetaMask:", error);
                alert("Error connecting MetaMask: " + error.message);
            }
        }
        
        async function connectTrustWallet() {
            if (typeof window.ethereum === 'undefined') {
                alert("Trust Wallet not found!");
                return;
            }
            
            try {
                const accounts = await window.ethereum.request({ 
                    method: 'eth_requestAccounts' 
                });
                
                provider = new ethers.providers.Web3Provider(window.ethereum);
                signer = provider.getSigner();
                userAddress = accounts[0];
                isConnected = true;
                
                updateWalletUI(true);
                await initRealDEX();
                await loadBalances();
                
                console.log("✅ Trust Wallet connected:", userAddress);
                
                // Показываем баннер DEX
                document.getElementById('realDexBanner').style.display = 'flex';
                
            } catch (error) {
                console.error("Error connecting Trust Wallet:", error);
                alert("Error connecting Trust Wallet: " + error.message);
            }
        }
        
        async function connectCoinbaseWallet() {
            if (typeof window.ethereum === 'undefined') {
                alert("Coinbase Wallet not found!");
                return;
            }
            
            try {
                const accounts = await window.ethereum.request({ 
                    method: 'eth_requestAccounts' 
                });
                
                provider = new ethers.providers.Web3Provider(window.ethereum);
                signer = provider.getSigner();
                userAddress = accounts[0];
                isConnected = true;
                
                updateWalletUI(true);
                await initRealDEX();
                await loadBalances();
                
                console.log("✅ Coinbase Wallet connected:", userAddress);
                
                // Показываем баннер DEX
                document.getElementById('realDexBanner').style.display = 'flex';
                
            } catch (error) {
                console.error("Error connecting Coinbase Wallet:", error);
                alert("Error connecting Coinbase Wallet: " + error.message);
            }
        }
        
        function disconnectWallet() {
            isConnected = false;
            provider = null;
            signer = null;
            userAddress = null;
            dexContract = null;
            zuzContract = null;
            pyusdContract = null;
            
            updateWalletUI(false);
            
            // Скрываем баннер DEX
            document.getElementById('realDexBanner').style.display = 'none';
            
            console.log("✅ Wallet disconnected");
        }
        
        function updateWalletUI(connected) {
            const connectBtn = document.getElementById('connectWalletBtn');
            const balanceContainer = document.getElementById('balanceContainer');
            const walletBtnText = document.getElementById('walletBtnText');
            
            if (connected) {
                connectBtn.innerHTML = '<i class="fas fa-wallet"></i><span id="walletBtnText">Disconnect</span>';
                connectBtn.classList.add('connected');
                balanceContainer.classList.add('show');
                walletBtnText.textContent = 'Disconnect';
                
                // Обновляем текст кнопки
                const span = connectBtn.querySelector('#walletBtnText');
                if (span) span.textContent = 'Disconnect';
            } else {
                connectBtn.innerHTML = '<i class="fas fa-wallet"></i><span id="walletBtnText">Connect Wallet</span>';
                connectBtn.classList.remove('connected');
                balanceContainer.classList.remove('show');
                
                // Обновляем текст кнопки
                const span = connectBtn.querySelector('#walletBtnText');
                if (span) span.textContent = 'Connect Wallet';
                
                document.getElementById('ethBalance').textContent = '0.00 ETH';
                document.getElementById('zuzBalance').innerHTML = `
                    <div class="small-coin-icon">Z</div>
                    <span>0 ZUZ</span>
                `;
                document.getElementById('networkName').textContent = 'Not Connected';
            }
        }
        
        // ============= ИНИЦИАЛИЗАЦИЯ РЕАЛЬНОГО DEX =============
        async function initRealDEX() {
            try {
                if (!provider || !signer) {
                    console.error("Provider or signer not initialized");
                    return;
                }
                
                // Создаем контракты
                dexContract = new ethers.Contract(DEX_CONFIG.address, DEX_ABI, signer);
                zuzContract = new ethers.Contract(DEX_CONFIG.zuzToken, ERC20_ABI, signer);
                pyusdContract = new ethers.Contract(DEX_CONFIG.pyusdToken, ERC20_ABI, signer);
                
                console.log("✅ Real DEX initialized");
                console.log("DEX Address:", DEX_CONFIG.address);
                console.log("ZUZ Token:", DEX_CONFIG.zuzToken);
                console.log("PYUSD Token:", DEX_CONFIG.pyusdToken);
                
            } catch (error) {
                console.error("Error initializing DEX:", error);
            }
        }
        
        // ============= РЕАЛЬНЫЕ СВАПЫ (ОСНОВНАЯ ФУНКЦИЯ) =============
        async function placeRealOrder(side) {
            if (!isConnected) {
                alert("Please connect wallet first!");
                openModal('walletModal');
                return;
            }
            
            try {
                const amount = document.getElementById('amountInput').value;
                if (!amount || amount <= 0) {
                    alert("Please enter valid amount!");
                    return;
                }
                
                // Определяем токены для свапа
                const tokenIn = side === 'buy' ? DEX_CONFIG.pyusdToken : DEX_CONFIG.zuzToken;
                const tokenOut = side === 'buy' ? DEX_CONFIG.zuzToken : DEX_CONFIG.pyusdToken;
                const description = side === 'buy' ? "PYUSD → ZUZ" : "ZUZ → PYUSD";
                
                // Получаем decimals для токена
                const tokenInContract = new ethers.Contract(tokenIn, ERC20_ABI, signer);
                const decimals = await tokenInContract.decimals();
                const amountIn = ethers.utils.parseUnits(amount, decimals);
                
                // Шаг 1: Даем approve (MetaMask запросит подтверждение)
                alert("MetaMask will ask for APPROVE confirmation...\nThis allows DEX to spend your tokens.");
                
                try {
                    const approveTx = await tokenInContract.approve(DEX_CONFIG.address, amountIn);
                    console.log("✅ Approve transaction sent:", approveTx.hash);
                    
                    // Показываем статус
                    showNotification("⏳ Waiting for approve confirmation...");
                    
                    // Ждем подтверждения
                    await approveTx.wait();
                    console.log("✅ Approve confirmed");
                    showNotification("✅ Approve confirmed!");
                    
                } catch (approveError) {
                    console.error("Approve error:", approveError);
                    alert("❌ Approve failed: " + approveError.message);
                    return;
                }
                
                // Шаг 2: Получаем котировку
                try {
                    const [quoteAmount, charityAmount] = await dexContract.getSwapQuote(tokenIn, tokenOut, amountIn);
                    const quoteDecimals = tokenOut === DEX_CONFIG.zuzToken ? 18 : 6; // ZUZ 18, PYUSD 6 decimals
                    const quoteFormatted = ethers.utils.formatUnits(quoteAmount, quoteDecimals);
                    const charityFormatted = ethers.utils.formatUnits(charityAmount, quoteDecimals);
                    
                    console.log("📊 Quote received:", quoteFormatted, "charity:", charityFormatted);
                    
                } catch (quoteError) {
                    console.error("Quote error:", quoteError);
                    // Продолжаем даже если котировка не удалась
                }
                
                // Шаг 3: Выполняем свап (MetaMask запросит подтверждение)
                alert("MetaMask will ask for SWAP confirmation...\nThis will execute the trade.");
                
                try {
                    const swapTx = await dexContract.swap(tokenIn, tokenOut, amountIn);
                    console.log("✅ Swap transaction sent:", swapTx.hash);
                    
                    showNotification(`🚀 ${description} swap sent!\nHash: ${swapTx.hash}\n1% going to charity.`);
                    
                    // Ждем подтверждения
                    await swapTx.wait();
                    
                    showNotification(`✅ Swap completed!\n1% donated to charity.`);
                    alert(`✅ ${description} swap completed!\n1% automatically donated to charity.`);
                    
                } catch (swapError) {
                    console.error("Swap error:", swapError);
                    alert("❌ Swap failed: " + swapError.message);
                    return;
                }
                
                // Шаг 4: Обновляем балансы
                await loadBalances();
                
            } catch (error) {
                console.error("Place order error:", error);
                alert(`❌ Error: ${error.message}`);
            }
        }
        
        // ============= ЗАГРУЗКА БАЛАНСОВ =============
        async function loadBalances() {
            if (!provider || !userAddress) return;
            
            try {
                // ETH баланс
                const balance = await provider.getBalance(userAddress);
                const ethBalance = ethers.utils.formatEther(balance);
                document.getElementById('ethBalance').textContent = parseFloat(ethBalance).toFixed(4) + ' ETH';
                
                // ZUZ баланс
                if (zuzContract) {
                    try {
                        const zuzBalance = await zuzContract.balanceOf(userAddress);
                        const zuzDecimals = await zuzContract.decimals();
                        const zuzFormatted = ethers.utils.formatUnits(zuzBalance, zuzDecimals);
                        document.getElementById('zuzBalance').innerHTML = `
                            <div class="small-coin-icon">Z</div>
                            <span>${parseFloat(zuzFormatted).toFixed(2)} ZUZ</span>
                        `;
                    } catch (zuzError) {
                        console.error("Error loading ZUZ balance:", zuzError);
                        document.getElementById('zuzBalance').innerHTML = `
                            <div class="small-coin-icon">Z</div>
                            <span>Error loading</span>
                        `;
                    }
                }
                
                // Получаем название сети
                const network = await provider.getNetwork();
                const networkName = network.name === 'unknown' ? 'Custom Network' : network.name;
                document.getElementById('networkName').textContent = networkName.charAt(0).toUpperCase() + networkName.slice(1);
                
            } catch (error) {
                console.error("Error loading balances:", error);
            }
        }
        
        // ============= ВСПОМОГАТЕЛЬНЫЕ ФУНКЦИИ =============
        function showNotification(message) {
            // Создаем уведомление
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: var(--card-bg);
                border: 2px solid var(--positive);
                border-radius: 10px;
                padding: 15px;
                color: var(--text);
                z-index: 3000;
                max-width: 400px;
                box-shadow: 0 5px 20px rgba(0,0,0,0.3);
                animation: slideIn 0.3s ease;
            `;
            
            notification.innerHTML = `
                <div style="display: flex; align-items: center; gap: 10px;">
                    <i class="fas fa-info-circle" style="color: var(--positive);"></i>
                    <div>${message}</div>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // Удаляем через 5 секунд
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 5000);
        }
        
        // ============= TRADINGVIEW =============
        function initTradingView() {
            if (typeof TradingView === 'undefined') {
                setTimeout(initTradingView, 1000);
                return;
            }
            
            const isMobile = window.innerWidth <= 768;
            
            try {
                new TradingView.widget({
                    "container_id": "tradingview_chart",
                    "width": "100%",
                    "height": "100%",
                    "symbol": "ETHUSD",
                    "interval": isMobile ? "60" : "D",
                    "timezone": "exchange",
                    "theme": "dark",
                    "style": "1",
                    "locale": "en",
                    "toolbar_bg": "#0a1525",
                    "enable_publishing": false,
                    "hide_side_toolbar": isMobile,
                    "allow_symbol_change": true,
                    "details": !isMobile,
                    "studies": isMobile ? [] : ["RSI@tv-basicstudies"],
                    "show_popup_button": !isMobile,
                    "popup_width": "1000",
                    "popup_height": "650"
                });
                console.log("✅ TradingView initialized");
            } catch (error) {
                console.error("Error initializing TradingView:", error);
            }
        }
        
        // ============= МОДАЛЬНЫЕ ОКНА =============
        function openModal(modalId) {
            if (!isConnected && modalId !== 'walletModal') {
                alert("Please connect wallet first!");
                openModal('walletModal');
                return;
            }
            document.getElementById(modalId).classList.add('active');
            document.body.style.overflow = 'hidden';
        }
        
        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
            document.body.style.overflow = 'auto';
        }
        
        // Закрытие всех модальных окон по клику вне
        document.querySelectorAll('.modal-overlay').forEach(modal => {
            modal.addEventListener('click', function(e) {
                if (e.target === this && !this.classList.contains('philosophy-modal')) {
                    const modalId = this.id;
                    closeModal(modalId);
                }
            });
        });
        
        // ============= ИНИЦИАЛИЗАЦИЯ =============
        window.addEventListener('DOMContentLoaded', () => {
            // TradingView
            setTimeout(initTradingView, 1000);
            
            // Кнопка Connect/Disconnect
            document.getElementById('connectWalletBtn').addEventListener('click', () => {
                if (isConnected) {
                    if (confirm("Disconnect wallet?")) {
                        disconnectWallet();
                    }
                } else {
                    openModal('walletModal');
                }
            });
            
            // Обновление total при вводе
            document.getElementById('amountInput')?.addEventListener('input', updateTotal);
            document.getElementById('priceInput')?.addEventListener('input', updateTotal);
            
            // Автоподключение если уже подключен
            if (typeof window.ethereum !== 'undefined' && window.ethereum.selectedAddress) {
                setTimeout(() => {
                    connectWallet('metamask');
                }, 1000);
            }
            
            // Мобильное меню
            initMobileMenu();
            
            // Установка активного меню
            setActiveMenu();
            
            // Добавляем стили для анимаций уведомлений
            const style = document.createElement('style');
            style.textContent = `
                @keyframes slideIn {
                    from { transform: translateX(100%); opacity: 0; }
                    to { transform: translateX(0); opacity: 1; }
                }
                @keyframes slideOut {
                    from { transform: translateX(0); opacity: 1; }
                    to { transform: translateX(100%); opacity: 0; }
                }
            `;
            document.head.appendChild(style);
        });
        
        function updateTotal() {
            const amount = parseFloat(document.getElementById('amountInput').value) || 0;
            const price = parseFloat(document.getElementById('priceInput').value) || 0;
            const total = amount * price;
            document.getElementById('totalInput').value = total.toFixed(4);
        }
        
        function switchTab(tabName) {
            // Убираем активный класс со всех табов
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            // Добавляем активный класс нажатому табу
            event.target.classList.add('active');
            
            // Скрываем все контенты табов
            document.getElementById('marketTab').style.display = 'none';
            document.getElementById('limitTab').style.display = 'none';
            document.getElementById('stopTab').style.display = 'none';
            
            // Показываем выбранный таб
            document.getElementById(tabName + 'Tab').style.display = 'block';
        }
        
        function changeTimeframe(timeframe) {
            // Убираем активный класс со всех кнопок таймфрейма
            event.target.parentElement.querySelectorAll('.tab').forEach(btn => btn.classList.remove('active'));
            // Добавляем активный класс нажатой кнопке
            event.target.classList.add('active');
            
            console.log("Changed timeframe to:", timeframe);
        }
        
        function selectPair(pair) {
            alert("Selected pair: " + pair);
        }
        
        // ============= ФУНКЦИИ ЭКОСИСТЕМЫ =============
        async function createToken() {
            if (!isConnected) {
                alert("Please connect wallet first!");
                return;
            }
            
            const tokenName = document.getElementById('tokenName').value;
            const tokenSymbol = document.getElementById('tokenSymbol').value;
            const totalSupply = document.getElementById('totalSupply').value;
            const charityPercentage = document.getElementById('charityPercentage').value;
            
            if (!tokenName || !tokenSymbol || !totalSupply) {
                alert("Please fill all required fields!");
                return;
            }
            
            alert(`✅ Creating token:\nName: ${tokenName}\nSymbol: ${tokenSymbol}\nSupply: ${totalSupply}\nCharity: ${charityPercentage}%\n\nToken creation fee includes 1% charity donation.`);
            
            closeModal('tokenFactoryModal');
        }
        
        async function notarizeDocument() {
            if (!isConnected) {
                alert("Please connect wallet first!");
                return;
            }
            
            const fileInput = document.getElementById('documentFile');
            if (!fileInput.files[0]) {
                alert("Please select a file!");
                return;
            }
            
            alert("✅ Document notarized on blockchain!\n\nYour document is now permanently timestamped and verifiable.");
            
            closeModal('notaryModal');
        }
        
        function verifyDocument() {
            alert("🔍 Document verification feature coming soon!\n\nUpload a document to verify its blockchain timestamp.");
        }
        
        function viewDonations() {
            alert("📊 Opening donation dashboard...\n\nSee all charitable contributions made through ZUZIM UNIVERSE.");
            closeModal('proofchainModal');
        }
        
        function voteForCharity() {
            alert("🗳️ Charity voting system coming soon!\n\nVote on which projects receive funding from the 1% auto-donate pool.");
        }
        
        function viewCharityProjects() {
            alert("🌍 Browse charity projects...\n\nSee all active projects funded by ZUZIM community.");
        }
        
        function viewMyTokens() {
            alert("👤 Viewing your created tokens...\n\nSee all tokens you've created with Token Factory.");
        }
        
        function viewTokenAnalytics() {
            alert("📈 Token analytics dashboard...\n\nDetailed analytics for all community tokens.");
        }
        
        function browseCommunityTokens() {
            alert("🔍 Browsing community tokens...\n\nDiscover tokens created by other ZUZIM users.");
        }
        
        // ============= МОБИЛЬНОЕ МЕНЮ =============
        function initMobileMenu() {
            if (window.innerWidth <= 768) {
                // Плавная прокрутка для якорных ссылок
                document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                    anchor.addEventListener('click', function(e) {
                        if (this.getAttribute('href') === '#') return;
                        
                        const targetId = this.getAttribute('href');
                        const targetElement = document.querySelector(targetId);
                        
                        if (targetElement) {
                            e.preventDefault();
                            window.scrollTo({
                                top: targetElement.offsetTop - 100,
                                behavior: 'smooth'
                            });
                        }
                    });
                });
            }
        }
        
        window.addEventListener('resize', initMobileMenu);
        
        // ============= АКТИВНОЕ МЕНЮ =============
        function setActiveMenu() {
            const currentHash = window.location.hash || '#';
            document.querySelectorAll('.nav a').forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === currentHash) {
                    link.classList.add('active');
                }
            });
            
            // Если нет хэша, делаем активным Trade
            if (currentHash === '#') {
                document.querySelector('.nav a[href="#"]').classList.add('active');
            }
        }
        
        window.addEventListener('hashchange', setActiveMenu);
        
        // ============= ДЕМО ДАННЫЕ =============
        // Обновляем цены каждые 10 секунд для реалистичности
        setInterval(() => {
            if (document.querySelector('.pair-price')) {
                const currentPrice = parseFloat(document.querySelector('.pair-price').textContent.replace('$', ''));
                const change = (Math.random() - 0.5) * 0.002; // ±0.2%
                const newPrice = currentPrice * (1 + change);
                
                document.querySelector('.pair-price').textContent = '$' + newPrice.toFixed(4);
                document.querySelector('.price-change').textContent = (change > 0 ? '+' : '') + (change * 100).toFixed(2) + '%';
                document.querySelector('.price-change').className = 'price-change ' + (change > 0 ? 'positive' : 'negative');
                
                // Обновляем цену в поле ввода
                document.getElementById('priceInput').value = newPrice.toFixed(4);
                updateTotal();
            }
        }, 10000);
    </script>
</body>
</html>
