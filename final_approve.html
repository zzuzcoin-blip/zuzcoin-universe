<html>
<head>
    <title>Approve Tokens for DEX</title>
    <!-- –ó–∞–≥—Ä—É–∂–∞–µ–º ethers –∏–∑ –Ω–∞–¥–µ–∂–Ω–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ -->
    <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
</head>
<body>
<h2>Approve Tokens for DEX</h2>

<button onclick="connectWallet()">üîó 1. Connect MetaMask</button>
<br><br>

<button id="btn1" disabled onclick="approveZUZ()">2. Approve ZUZ</button><br>
<button id="btn2" disabled onclick="approveUSDT()">3. Approve USDT</button><br>
<button id="btn3" disabled onclick="addLiquidity()">4. Add Liquidity</button>

<p id="result">Status: Ready</p>

<script>
let signer;

async function connectWallet() {
    if (!window.ethereum) {
        document.getElementById('result').innerHTML = "‚ùå Install MetaMask!";
        return;
    }
    
    try {
        document.getElementById('result').innerHTML = "‚è≥ Connecting...";
        
        // –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –∞–∫–∫–∞—É–Ω—Ç—ã
        await window.ethereum.request({ method: 'eth_requestAccounts' });
        
        // –°–æ–∑–¥–∞–µ–º –ø—Ä–æ–≤–∞–π–¥–µ—Ä
        const provider = new ethers.providers.Web3Provider(window.ethereum);
        signer = provider.getSigner();
        
        // –ü–æ–ª—É—á–∞–µ–º –∞–¥—Ä–µ—Å
        const address = await signer.getAddress();
        document.getElementById('result').innerHTML = "‚úÖ Connected: " + address.substring(0, 10) + "...";
        
        // –í–∫–ª—é—á–∞–µ–º –∫–Ω–æ–ø–∫–∏
        document.getElementById('btn1').disabled = false;
        document.getElementById('btn2').disabled = false;
        document.getElementById('btn3').disabled = false;
        
    } catch (error) {
        document.getElementById('result').innerHTML = "‚ùå Error: " + error.message;
    }
}

async function approveZUZ() {
    try {
        document.getElementById('result').innerHTML = "‚è≥ Approving ZUZ...";
        
        // ABI –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–∏ approve
        const abi = ["function approve(address spender, uint256 amount) returns (bool)"];
        
        // –ê–¥—Ä–µ—Å ZUZ —Ç–æ–∫–µ–Ω–∞
        const zuzAddress = "0x4284ecC7E6E560cAfc0bA65CbDFc9c19bd2C0bD3";
        
        // –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ç—Ä–∞–∫—Ç
        const contract = new ethers.Contract(zuzAddress, abi, signer);
        
        // –ê–¥—Ä–µ—Å DEX
        const dexAddress = "0x09970975aa48c718e17db4a18128ebf6806e1f2c";
        
        // 1000 ZUZ —Å 18 decimals
        const amount = "1000000000000000000000";
        
        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é
        const tx = await contract.approve(dexAddress, amount);
        
        document.getElementById('result').innerHTML = "‚úÖ ZUZ Approval sent! Hash: " + tx.hash;
        
        // –ñ–¥–µ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
        await tx.wait();
        document.getElementById('result').innerHTML = "‚úÖ ZUZ Approved! Transaction confirmed.";
        
    } catch (error) {
        document.getElementById('result').innerHTML = "‚ùå Error: " + error.message;
    }
}

async function approveUSDT() {
    try {
        document.getElementById('result').innerHTML = "‚è≥ Approving USDT...";
        
        const abi = ["function approve(address spender, uint256 amount) returns (bool)"];
        const usdtAddress = "0x7169D38820dfd117C3FA1f22a697dBA58d90BA06";
        const contract = new ethers.Contract(usdtAddress, abi, signer);
        const dexAddress = "0x09970975aa48c718e17db4a18128ebf6806e1f2c";
        
        // 500 USDT —Å 6 decimals
        const amount = "500000000";
        
        const tx = await contract.approve(dexAddress, amount);
        document.getElementById('result').innerHTML = "‚úÖ USDT Approval sent! Hash: " + tx.hash;
        
        await tx.wait();
        document.getElementById('result').innerHTML = "‚úÖ USDT Approved! Transaction confirmed.";
        
    } catch (error) {
        document.getElementById('result').innerHTML = "‚ùå Error: " + error.message;
    }
}

async function addLiquidity() {
    try {
        document.getElementById('result').innerHTML = "‚è≥ Adding liquidity...";
        
        const abi = ["function addLiquidity(address tokenA, address tokenB, uint256 amountA, uint256 amountB)"];
        const dexAddress = "0x09970975aa48c718e17db4a18128ebf6806e1f2c";
        const contract = new ethers.Contract(dexAddress, abi, signer);
        
        const zuzAddress = "0x4284ecC7E6E560cAfc0bA65CbDFc9c19bd2C0bD3";
        const usdtAddress = "0x7169D38820dfd117C3FA1f22a697dBA58d90BA06";
        
        const zuzAmount = "1000000000000000000000"; // 1000 ZUZ
        const usdtAmount = "500000000"; // 500 USDT
        
        const tx = await contract.addLiquidity(zuzAddress, usdtAddress, zuzAmount, usdtAmount);
        document.getElementById('result').innerHTML = "‚úÖ Liquidity transaction sent! Hash: " + tx.hash;
        
        await tx.wait();
        document.getElementById('result').innerHTML = "üéâ SUCCESS! Liquidity added to DEX!";
        
    } catch (error) {
        document.getElementById('result').innerHTML = "‚ùå Error: " + error.message;
    }
}
</script>
</body>
</html>
