<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZUZCOIN Universe | Live Blockchain Ecosystem with DEX Trading</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
    <!-- TradingView Charting Library -->
    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
    <style>
        /* ===== GLOBAL STYLES ===== */
        :root {
            --primary: #00ff88;
            --secondary: #667eea;
            --dark: #0a0a0a;
            --dark-light: #1a1a2e;
            --card-bg: rgba(255, 255, 255, 0.05);
            --text: #ffffff;
            --text-secondary: #aaaaaa;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: linear-gradient(135deg, var(--dark) 0%, var(--dark-light) 100%);
            color: var(--text);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        /* ===== HEADER & NAVIGATION ===== */
        header {
            background: rgba(10, 10, 10, 0.9);
            backdrop-filter: blur(10px);
            padding: 20px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(0, 255, 136, 0.2);
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logo-icon {
            font-size: 32px;
            color: var(--primary);
        }
        
        .logo-text h1 {
            font-size: 24px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .logo-text span {
            font-size: 12px;
            color: var(--text-secondary);
        }
        
        nav ul {
            display: flex;
            gap: 30px;
            list-style: none;
        }
        
        nav a {
            color: var(--text);
            text-decoration: none;
            font-size: 16px;
            padding: 8px 16px;
            border-radius: 20px;
            transition: all 0.3s;
        }
        
        nav a:hover, nav a.active {
            background: rgba(0, 255, 136, 0.1);
            color: var(--primary);
        }
        
        .wallet-section {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .wallet-btn {
            background: linear-gradient(135deg, #F6851B 0%, #E2761B 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
        }
        
        .wallet-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(246, 133, 27, 0.4);
        }
        
        /* ===== WALLET CONNECTION MODAL ===== */
        .wallet-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }
        
        .wallet-options {
            background: var(--dark-light);
            padding: 40px;
            border-radius: 20px;
            max-width: 500px;
            width: 90%;
            border: 1px solid rgba(0, 255, 136, 0.3);
        }
        
        .wallet-option {
            display: flex;
            align-items: center;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            margin: 15px 0;
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid transparent;
        }
        
        .wallet-option:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: var(--primary);
            transform: translateY(-3px);
        }
        
        .wallet-icon {
            font-size: 32px;
            margin-right: 20px;
        }
        
        .wallet-info h3 {
            font-size: 18px;
            margin-bottom: 5px;
        }
        
        .wallet-info p {
            font-size: 12px;
            color: var(--text-secondary);
        }
        
        /* ===== MAIN CONTENT ===== */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 30px;
        }
        
        .dashboard {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }
        
        /* ===== TRADING CHART SECTION ===== */
        .chart-section {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .pair-selector {
            display: flex;
            gap: 10px;
        }
        
        .pair-btn {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--text);
            padding: 8px 16px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .pair-btn.active {
            background: var(--primary);
            color: var(--dark);
        }
        
        #tradingview_chart {
            width: 100%;
            height: 500px;
            border-radius: 15px;
            overflow: hidden;
        }
        
        /* ===== TRADING PANEL ===== */
        .trading-panel {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .order-type {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .order-btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.05);
            color: var(--text);
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .order-btn.active {
            background: var(--primary);
            color: var(--dark);
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--text-secondary);
            font-size: 14px;
        }
        
        .input-with-max {
            display: flex;
            gap: 10px;
        }
        
        .input-with-max input {
            flex: 1;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            color: var(--text);
            font-size: 16px;
        }
        
        .max-btn {
            padding: 0 20px;
            background: rgba(0, 255, 136, 0.2);
            border: 1px solid var(--primary);
            color: var(--primary);
            border-radius: 10px;
            cursor: pointer;
        }
        
        .trade-btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, var(--primary) 0%, #00cc6a 100%);
            color: var(--dark);
            border: none;
            border-radius: 15px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s;
        }
        
        .trade-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0, 255, 136, 0.4);
        }
        
        /* ===== ECOSYSTEM SECTION ===== */
        .ecosystem-section {
            margin-top: 50px;
        }
        
        .ecosystem-section h2 {
            text-align: center;
            margin-bottom: 40px;
            font-size: 32px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .ecosystem-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
        }
        
        .ecosystem-card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s;
        }
        
        .ecosystem-card:hover {
            transform: translateY(-10px);
            border-color: var(--primary);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }
        
        .card-icon {
            font-size: 40px;
            margin-bottom: 20px;
            color: var(--primary);
        }
        
        .ecosystem-card h3 {
            font-size: 22px;
            margin-bottom: 15px;
        }
        
        .ecosystem-card p {
            color: var(--text-secondary);
            margin-bottom: 25px;
            line-height: 1.6;
        }
        
        .card-features {
            list-style: none;
            margin-bottom: 25px;
        }
        
        .card-features li {
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .card-features li:before {
            content: "‚úì";
            color: var(--primary);
            font-weight: bold;
        }
        
        .card-action {
            display: inline-block;
            padding: 12px 30px;
            background: rgba(0, 255, 136, 0.1);
            color: var(--primary);
            border: 1px solid var(--primary);
            border-radius: 25px;
            text-decoration: none;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .card-action:hover {
            background: var(--primary);
            color: var(--dark);
        }
        
        /* ===== BALANCE DISPLAY ===== */
        .balance-display {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 25px;
            margin-top: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .balance-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }
        
        .balance-item {
            text-align: center;
            padding: 20px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 15px;
        }
        
        .balance-value {
            font-size: 24px;
            font-weight: bold;
            margin: 10px 0;
            color: var(--primary);
        }
        
        /* ===== FOOTER ===== */
        footer {
            text-align: center;
            padding: 40px;
            margin-top: 50px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--text-secondary);
        }
        
        /* ===== RESPONSIVE ===== */
        @media (max-width: 1200px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 768px) {
            header {
                flex-direction: column;
                gap: 20px;
                padding: 20px;
            }
            
            nav ul {
                flex-wrap: wrap;
                justify-content: center;
                gap: 15px;
            }
            
            .ecosystem-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="logo">
            <div class="logo-icon">‚ö°</div>
            <div class="logo-text">
                <h1>ZUZCOIN Universe</h1>
                <span>Ancient Wisdom √ó Modern Technology</span>
            </div>
        </div>
        
        <nav>
            <ul>
                <li><a href="#trading" class="active">ZUZIM DEX</a></li>
                <li><a href="#token-factory">Token Factory</a></li>
                <li><a href="#digital-notary">Digital Notary</a></li>
                <li><a href="#proofchain">ProofChain</a></li>
                <li><a href="#charity">Philanthropy</a></li>
            </ul>
        </nav>
        
        <div class="wallet-section">
            <button class="wallet-btn" onclick="showWalletModal()">
                <i class="fas fa-wallet"></i>
                <span id="walletBtnText">Connect Wallet</span>
            </button>
            <div id="walletInfo" style="display: none; font-size: 12px;">
                <div>üìç <span id="walletAddress"></span></div>
                <div>ü™ô <span id="walletZuzBalance">0 ZUZ</span></div>
            </div>
        </div>
    </header>

    <!-- Wallet Connection Modal -->
    <div id="walletModal" class="wallet-modal">
        <div class="wallet-options">
            <h2 style="text-align: center; margin-bottom: 30px;">Connect Your Wallet</h2>
            
            <div class="wallet-option" onclick="connectMetaMask()">
                <div class="wallet-icon">ü¶ä</div>
                <div class="wallet-info">
                    <h3>MetaMask</h3>
                    <p>Most popular Ethereum wallet</p>
                </div>
                <div style="color: var(--primary);">‚Üí</div>
            </div>
            
            <div class="wallet-option" onclick="connectWalletConnect()">
                <div class="wallet-icon">üîó</div>
                <div class="wallet-info">
                    <h3>WalletConnect</h3>
                    <p>Connect Trust Wallet, Rainbow, etc.</p>
                </div>
                <div style="color: var(--primary);">‚Üí</div>
            </div>
            
            <div class="wallet-option" onclick="connectCoinbase()">
                <div class="wallet-icon">‚ö°</div>
                <div class="wallet-info">
                    <h3>Coinbase Wallet</h3>
                    <p>Official Coinbase wallet</p>
                </div>
                <div style="color: var(--primary);">‚Üí</div>
            </div>
            
            <p style="text-align: center; margin-top: 20px; color: var(--text-secondary); font-size: 12px;">
                By connecting, you agree to our Terms of Service
            </p>
        </div>
    </div>

    <!-- Main Content -->
    <div class="container">
        <!-- Dashboard -->
        <div class="dashboard">
            <!-- Trading Chart -->
            <div class="chart-section">
                <div class="chart-header">
                    <h2><i class="fas fa-chart-line"></i> ZUZ/USDT Trading Chart</h2>
                    <div class="pair-selector">
                        <button class="pair-btn active">ZUZ/USDT</button>
                        <button class="pair-btn">ETH/USDT</button>
                        <button class="pair-btn">BTC/USDT</button>
                    </div>
                </div>
                <div id="tradingview_chart"></div>
            </div>
            
            <!-- Trading Panel -->
            <div class="trading-panel">
                <h2><i class="fas fa-exchange-alt"></i> Trade ZUZ</h2>
                <div class="order-type">
                    <button class="order-btn active">Buy</button>
                    <button class="order-btn">Sell</button>
                    <button class="order-btn">Limit</button>
                </div>
                
                <div class="input-group">
                    <label>Amount (ZUZ)</label>
                    <div class="input-with-max">
                        <input type="number" id="tradeAmount" placeholder="0.0" value="100">
                        <button class="max-btn" onclick="setMaxAmount()">MAX</button>
                    </div>
                </div>
                
                <div class="input-group">
                    <label>Price (USDT)</label>
                    <input type="number" id="tradePrice" placeholder="0.05" value="0.05">
                </div>
                
                <div class="input-group">
                    <label>Total (USDT)</label>
                    <input type="number" id="tradeTotal" placeholder="0.0" readonly>
                </div>
                
                <div style="margin: 20px 0; padding: 15px; background: rgba(0, 255, 136, 0.1); border-radius: 10px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                        <span>1% Auto-Donation:</span>
                        <span id="charityAmount">1 ZUZ</span>
                    </div>
                    <div style="font-size: 12px; color: var(--text-secondary);">
                        Every trade automatically donates 1% to philanthropy
                    </div>
                </div>
                
                <button class="trade-btn" id="executeTrade">
                    <span id="tradeBtnText">Connect Wallet to Trade</span>
                </button>
            </div>
        </div>

        <!-- Ecosystem Section -->
        <div class="ecosystem-section" id="ecosystem">
            <h2>ZUZCOIN Universe Ecosystem</h2>
            
            <div class="ecosystem-grid">
                <!-- Token Factory -->
                <div class="ecosystem-card">
                    <div class="card-icon">üè≠</div>
                    <h3>Token Factory</h3>
                    <p>Create your own tokens with built-in philanthropy. Launch tokens that automatically donate 1-10% of every transaction to verified charities.</p>
                    
                    <ul class="card-features">
                        <li>Custom charity percentage (1-10%)</li>
                        <li>No coding required</li>
                        <li>Instant blockchain deployment</li>
                        <li>Automatic DEX listing</li>
                        <li>Community management tools</li>
                    </ul>
                    
                    <div class="input-group">
                        <label>Token Name</label>
                        <input type="text" id="tokenName" placeholder="EcoToken" style="width: 100%; padding: 12px;">
                    </div>
                    
                    <div class="input-group">
                        <label>Charity Percentage</label>
                        <input type="range" id="charityPercent" min="1" max="10" value="1" style="width: 100%;">
                        <div style="display: flex; justify-content: space-between;">
                            <span>1%</span>
                            <span id="percentValue">1%</span>
                            <span>10%</span>
                        </div>
                    </div>
                    
                    <button class="card-action" onclick="createToken()">Create Token (500 ZUZ)</button>
                </div>
                
                <!-- Digital Notary -->
                <div class="ecosystem-card">
                    <div class="card-icon">üìú</div>
                    <h3>Digital Notary</h3>
                    <p>Timestamp documents, prove ownership, and verify authenticity on the blockchain. Permanent, immutable records that stand up in legal proceedings.</p>
                    
                    <ul class="card-features">
                        <li>Permanent blockchain timestamp</li>
                        <li>SHA-256 hash verification</li>
                        <li>Legal validity worldwide</li>
                        <li>File integrity protection</li>
                        <li>Proof of existence</li>
                    </ul>
                    
                    <div class="input-group">
                        <label>Upload Document</label>
                        <input type="file" id="documentFile" style="width: 100%; padding: 12px; background: rgba(255,255,255,0.05); border-radius: 10px;">
                    </div>
                    
                    <div class="input-group">
                        <label>Document Hash</label>
                        <input type="text" id="documentHash" placeholder="Will be generated automatically" readonly style="width: 100%; padding: 12px;">
                    </div>
                    
                    <button class="card-action" onclick="notarizeDocument()">Notarize Document (100 ZUZ)</button>
                </div>
                
                <!-- ProofChain -->
                <div class="ecosystem-card">
                    <div class="card-icon">‚õìÔ∏è</div>
                    <h3>ProofChain</h3>
                    <p>Dedicated blockchain network (Chain ID: 7777) for copyright protection and intellectual property verification. Built for creators and innovators.</p>
                    
                    <ul class="card-features">
                        <li>Chain ID: 7777 dedicated network</li>
                        <li>Copyright registration</li>
                        <li>IP protection certificates</li>
                        <li>Royalty automation</li>
                        <li>Cross-chain verification</li>
                    </ul>
                    
                    <div style="margin: 20px 0; padding: 15px; background: rgba(102, 126, 234, 0.1); border-radius: 10px;">
                        <div style="font-weight: bold; margin-bottom: 5px;">Network Status</div>
                        <div style="font-size: 12px;">‚úÖ ProofChain Mainnet Operational</div>
                        <div style="font-size: 12px;">üîÑ Connected to BSC: 0x60cA3145F64919F26b47a2270F4cE36F239033e9</div>
                    </div>
                    
                    <button class="card-action" onclick="viewProofChain()">Explore ProofChain</button>
                </div>
            </div>
        </div>

        <!-- Balance Display -->
        <div class="balance-display">
            <h3><i class="fas fa-coins"></i> Your Balances</h3>
            <div class="balance-grid">
                <div class="balance-item">
                    <div>ü™ô ZUZ Balance</div>
                    <div class="balance-value" id="zuzBalanceDisplay">0</div>
                    <div>ZUZCOIN Token</div>
                </div>
                <div class="balance-item">
                    <div>üîµ ETH Balance</div>
                    <div class="balance-value" id="ethBalanceDisplay">0</div>
                    <div>Ethereum</div>
                </div>
                <div class="balance-item">
                    <div>üíé USDT Balance</div>
                    <div class="balance-value" id="usdtBalanceDisplay">0</div>
                    <div>Tether USD</div>
                </div>
                <div class="balance-item">
                    <div>‚ù§Ô∏è Charity Impact</div>
                    <div class="balance-value" id="charityImpact">$0</div>
                    <div>Total Donated</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <p>ZUZCOIN Universe ¬© 2024 | "Ancient Wisdom, Modern Technology"</p>
        <p style="margin-top: 10px; font-size: 14px;">
            <i class="fas fa-heart" style="color: #ff4444;"></i> Every transaction automatically donates 1% to The Giving Pledge
        </p>
        <div style="margin-top: 20px; font-size: 12px; color: #666;">
            <p>Contract Verified: 0x4284ecC7E6E560cAfc0bA65CbDFc9c19bd2C0bD3 | Sepolia Testnet</p>
            <p>Real trading available after mainnet launch | Platform Version: 3.0</p>
        </div>
    </footer>

    <script>
    // ===========================================
    // ZUZCOIN UNIVERSE - MAIN APPLICATION
    // ===========================================
    
    // Configuration
    const ZUZ_TOKEN_ADDRESS = '0x4284ecC7E6E560cAfc0bA65CbDFc9c19bd2C0bD3';
    const ZUZ_TOKEN_ABI = [
        "function balanceOf(address) view returns (uint256)",
        "function transfer(address to, uint256 amount) returns (bool)",
        "function decimals() view returns (uint8)",
        "function symbol() view returns (string)",
        "function name() view returns (string)"
    ];
    
    // Global state
    let provider = null;
    let signer = null;
    let account = null;
    let zuzContract = null;
    let isConnected = false;
    
    // ===== WALLET FUNCTIONS =====
    function showWalletModal() {
        document.getElementById('walletModal').style.display = 'flex';
    }
    
    function hideWalletModal() {
        document.getElementById('walletModal').style.display = 'none';
    }
    
    // Close modal on outside click
    document.getElementById('walletModal').addEventListener('click', function(e) {
        if (e.target === this) {
            hideWalletModal();
        }
    });
    
    // MetaMask Connection
    async function connectMetaMask() {
        if (typeof window.ethereum === 'undefined') {
            alert('Please install MetaMask to continue!');
            window.open('https://metamask.io/download/', '_blank');
            return;
        }
        
        try {
            // THIS WILL SHOW METAMASK POPUP!
            const accounts = await window.ethereum.request({
                method: 'eth_requestAccounts'
            });
            
            if (accounts.length > 0) {
                await initializeWeb3(accounts[0]);
                hideWalletModal();
                showNotification('‚úÖ MetaMask connected successfully!');
            }
        } catch (error) {
            console.error('MetaMask connection error:', error);
            showNotification('‚ùå Error: ' + error.message, true);
        }
    }
    
    // WalletConnect (simulated)
    async function connectWalletConnect() {
        showNotification('üîó WalletConnect integration in development', true);
        // In production: Initialize WalletConnect modal
    }
    
    // Coinbase Wallet (simulated)
    async function connectCoinbase() {
        showNotification('‚ö° Coinbase Wallet integration in development', true);
        // In production: Initialize Coinbase Wallet SDK
    }
    
    // Initialize Web3
    async function initializeWeb3(userAccount) {
        try {
            account = userAccount;
            provider = new ethers.BrowserProvider(window.ethereum);
            signer = await provider.getSigner();
            zuzContract = new ethers.Contract(ZUZ_TOKEN_ADDRESS, ZUZ_TOKEN_ABI, provider);
            
            // Update UI
            updateWalletUI();
            
            // Load balances
            await updateBalances();
            
            // Initialize chart
            initializeTradingChart();
            
            // Setup event listeners
            setupEventListeners();
            
            isConnected = true;
            
        } catch (error) {
            console.error('Web3 initialization error:', error);
            showNotification('‚ùå Failed to initialize Web3', true);
        }
    }
    
    // Update wallet UI
    function updateWalletUI() {
        const walletBtn = document.getElementById('walletBtnText');
        const walletInfo = document.getElementById('walletInfo');
        const walletAddress = document.getElementById('walletAddress');
        const tradeBtn = document.getElementById('tradeBtnText');
        
        if (account) {
            // Update button
            walletBtn.textContent = account.substring(0, 6) + '...' + account.substring(38);
            
            // Show wallet info
            walletInfo.style.display = 'block';
            walletAddress.textContent = account.substring(0, 6) + '...' + account.substring(38);
            
            // Update trade button
            tradeBtn.textContent = 'Execute Trade';
            
        } else {
            walletBtn.textContent = 'Connect Wallet';
            walletInfo.style.display = 'none';
            tradeBtn.textContent = 'Connect Wallet to Trade';
        }
    }
    
    // Update all balances
    async function updateBalances() {
        if (!provider || !account) return;
        
        try {
            // ETH Balance
            const ethBalance = await provider.getBalance(account);
            document.getElementById('ethBalanceDisplay').textContent = 
                parseFloat(ethers.formatEther(ethBalance)).toFixed(4);
            
            // ZUZ Balance
            const zuzBalance = await zuzContract.balanceOf(account);
            const zuzFormatted = parseFloat(ethers.formatUnits(zuzBalance, 18));
            document.getElementById('zuzBalanceDisplay').textContent = zuzFormatted.toFixed(0);
            document.getElementById('walletZuzBalance').textContent = zuzFormatted.toFixed(0) + ' ZUZ';
            
            // USDT Balance (simulated)
            document.getElementById('usdtBalanceDisplay').textContent = '0.00';
            
            // Update charity impact
            updateCharityImpact(zuzFormatted);
            
        } catch (error) {
            console.error('Balance update error:', error);
        }
    }
    
    // Update charity impact display
    function updateCharityImpact(zuzBalance) {
        // Simulated impact calculation
        const estimatedImpact = zuzBalance * 0.01 * 0.05; // 1% of balance √ó estimated $0.05 per ZUZ
        document.getElementById('charityImpact').textContent = '$' + estimatedImpact.toFixed(2);
        
        // Update charity amount in trade panel
        const tradeAmount = parseFloat(document.getElementById('tradeAmount').value) || 0;
        document.getElementById('charityAmount').textContent = (tradeAmount * 0.01).toFixed(2) + ' ZUZ';
    }
    
    // ===== TRADING FUNCTIONS =====
    function setMaxAmount() {
        const zuzBalance = parseFloat(document.getElementById('zuzBalanceDisplay').textContent);
        if (zuzBalance > 0) {
            document.getElementById('tradeAmount').value = zuzBalance;
            calculateTradeTotal();
        }
    }
    
    function calculateTradeTotal() {
        const amount = parseFloat(document.getElementById('tradeAmount').value) || 0;
        const price = parseFloat(document.getElementById('tradePrice').value) || 0.05;
        const total = amount * price;
        document.getElementById('tradeTotal').value = total.toFixed(2);
        updateCharityImpact(amount);
    }
    
    // Initialize TradingView chart
    function initializeTradingChart() {
        if (typeof TradingView === 'undefined') return;
        
        new TradingView.widget({
            container_id: "tradingview_chart",
            width: "100%",
            height: 500,
            symbol: "BINANCE:BTCUSDT",
            interval: "15",
            timezone: "Etc/UTC",
            theme: "dark",
            style: "1",
            locale: "en",
            toolbar_bg: "#0a0a0a",
            enable_publishing: false,
            hide_side_toolbar: false,
            allow_symbol_change: true,
            details: true,
            studies: ["Volume@tv-basicstudies"],
            show_popup_button: true,
            popup_width: "1000",
            popup_height: "650",
        });
    }
    
    // ===== ECOSYSTEM FUNCTIONS =====
    function createToken() {
        if (!isConnected) {
            showNotification('üîó Please connect your wallet first', true);
            return;
        }
        showNotification('üè≠ Token Factory: Launching token creation wizard...');
        // In production: Launch token creation interface
    }
    
    function notarizeDocument() {
        if (!isConnected) {
            showNotification('üîó Please connect your wallet first', true);
            return;
        }
        
        const fileInput = document.getElementById('documentFile');
        if (!fileInput.files.length) {
            showNotification('üìÑ Please select a document to notarize', true);
            return;
        }
        
        showNotification('üìú Calculating document hash...');
        // In production: Calculate SHA-256 hash and send to blockchain
    }
    
    function viewProofChain() {
        showNotification('‚õìÔ∏è Opening ProofChain explorer...');
        window.open('https://sepolia.etherscan.io/address/0x4284ecC7E6E560cAfc0bA65CbDFc9c19bd2C0bD3', '_blank');
    }
    
    // ===== UTILITY FUNCTIONS =====
    function showNotification(message, isError = false) {
        // Create notification element
        const notification = document.createElement('div');
        notification.style.cssText = `
            position: fixed;
            top: 20px;
            right: 20px;
            background: ${isError ? 'rgba(244, 67, 54, 0.9)' : 'rgba(76, 175, 80, 0.9)'};
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            z-index: 10000;
            backdrop-filter: blur(10px);
            animation: slideIn 0.3s ease;
        `;
        
        notification.innerHTML = message;
        document.body.appendChild(notification);
        
        // Remove after 3 seconds
        setTimeout(() => {
            notification.style.animation = 'slideOut 0.3s ease';
            setTimeout(() => document.body.removeChild(notification), 300);
        }, 3000);
    }
    
    function setupEventListeners() {
        // Trade amount input
        document.getElementById('tradeAmount').addEventListener('input', calculateTradeTotal);
        document.getElementById('tradePrice').addEventListener('input', calculateTradeTotal);
        
        // Charity percentage slider
        document.getElementById('charityPercent').addEventListener('input', function() {
            document.getElementById('percentValue').textContent = this.value + '%';
        });
        
        // Document file upload
        document.getElementById('documentFile').addEventListener('change', function() {
            if (this.files.length) {
                // Simulate hash generation
                const fakeHash = '0x' + Array.from({length: 64}, () => 
                    Math.floor(Math.random() * 16).toString(16)).join('');
                document.getElementById('documentHash').value = fakeHash;
            }
        });
        
        // Execute trade button
        document.getElementById('executeTrade').addEventListener('click', async function() {
            if (!isConnected) {
                showWalletModal();
                return;
            }
            
            const amount = document.getElementById('tradeAmount').value;
            if (!amount || amount <= 0) {
                showNotification('‚ùå Please enter a valid amount', true);
                return;
            }
            
            showNotification('üîÑ Executing trade...');
            // In production: Execute actual trade transaction
        });
        
        // Order type buttons
        document.querySelectorAll('.order-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.order-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
            });
        });
        
        // Pair selector buttons
        document.querySelectorAll('.pair-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.pair-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                showNotification(`üìä Switched to ${this.textContent} chart`);
            });
        });
        
        // Navigation links
        document.querySelectorAll('nav a').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                document.querySelectorAll('nav a').forEach(l => l.classList.remove('active'));
                this.classList.add('active');
                
                const targetId = this.getAttribute('href').substring(1);
                const targetElement = document.getElementById(targetId);
                if (targetElement) {
                    targetElement.scrollIntoView({ behavior: 'smooth' });
                }
            });
        });
    }
    
    // ===== INITIALIZATION =====
    document.addEventListener('DOMContentLoaded', function() {
        // Add animation styles
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);
        
        // Check if already connected to MetaMask
        if (typeof window.ethereum !== 'undefined') {
            window.ethereum.request({ method: 'eth_accounts' })
                .then(accounts => {
                    if (accounts.length > 0) {
                        initializeWeb3(accounts[0]);
                    }
                })
                .catch(console.error);
            
            // Listen for account changes
            window.ethereum.on('accountsChanged', (accounts) => {
                if (accounts.length > 0) {
                    initializeWeb3(accounts[0]);
                } else {
                    // Disconnected
                    account = null;
                    isConnected = false;
                    updateWalletUI();
                }
            });
        }
        
        // Initialize chart even without wallet
        setTimeout(initializeTradingChart, 1000);
        
        // Calculate initial trade total
        calculateTradeTotal();
        
        console.log('üöÄ ZUZCOIN Universe initialized successfully!');
    });
    </script>
</body>
</html>
