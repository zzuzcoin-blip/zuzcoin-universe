<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZUZCOIN Universe | Real DEX Trading</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫–æ—à–µ–ª—å–∫–∞ */
        .wallet-btn.connected {
        }
        
        .wallet-btn.connected:hover {
        }
        
        /* –ê–Ω–∏–º–∞—Ü–∏—è –¥–ª—è —Å–ø–∏–Ω–Ω–µ—Ä–∞ */
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .fa-spin {
            animation: spin 1s linear infinite;
        }
        :root {
            --primary: #0e1a2d;
            --secondary: #1a2b44;
            --accent: #00c3ff;
            --positive: #00d18c;
            --negative: #ff4d4d;
            --text: #ffffff;
            --text-secondary: #8a9bb2;
            --border: #2a3b54;
            --card-bg: rgba(20, 30, 48, 0.8);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, var(--primary) 0%, #0c1525 100%);
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            border-bottom: 1px solid var(--border);
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 24px;
            font-weight: 700;
        }
        
        .logo i {
            color: var(--accent);
            font-size: 28px;
        }
        
        .nav {
            display: flex;
            gap: 30px;
        }
        
        .nav a {
            color: var(--text-secondary);
            text-decoration: none;
            padding: 8px 16px;
            border-radius: 8px;
            transition: all 0.3s;
        }
        
        .nav a:hover, .nav a.active {
            background: var(--secondary);
            color: var(--text);
        }
        
        .wallet-btn {
            background: var(--accent);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
        }
        
        .balance-container {
            display: flex;
            gap: 20px;
            background: var(--secondary);
            padding: 12px 20px;
            border-radius: 10px;
        }
        
        .balance-item {
            text-align: center;
        }
        
        .balance-label {
            font-size: 12px;
            color: var(--text-secondary);
        }
        
        .balance-value {
            font-size: 14px;
            font-weight: 600;
        }
        
        .balance-value.eth {
            color: #627eea;
        }
        
        .balance-value.zuz {
            color: var(--positive);
        }
        
        .main-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
            margin: 30px 0;
        }
        
        .chart-container {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 25px;
            height: 500px;
        }
        
        .trading-panel {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 25px;
        }
        
        .tab-container {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .tab {
            flex: 1;
            background: var(--secondary);
            border: none;
            color: var(--text);
            padding: 12px;
            border-radius: 8px;
            cursor: pointer;
        }
        
        .tab.active {
            background: var(--accent);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            color: var(--text-secondary);
        }
        
        .form-input {
            width: 100%;
            background: var(--secondary);
            border: 1px solid var(--border);
            color: var(--text);
            padding: 12px;
            border-radius: 8px;
            font-size: 16px;
        }
        
        .btn-buy, .btn-sell {
            width: 100%;
            padding: 16px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin: 10px 0;
        }
        
        .btn-buy {
            background: var(--positive);
            color: white;
        }
        
        .btn-sell {
            background: var(--negative);
            color: white;
        }
        
        .section-title {
            font-size: 20px;
            margin: 40px 0 20px;
            color: var(--text);
        }
        
        .features-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .feature-card {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 25px;
            text-align: center;
        }
        
        .feature-icon {
            font-size: 40px;
            color: var(--accent);
            margin-bottom: 15px;
        }
        
        .real-dex-banner {
            background: linear-gradient(90deg, var(--positive), #00b377);
            padding: 15px;
            text-align: center;
            margin: 20px 0;
            border-radius: 10px;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.8; }
            100% { opacity: 1; }
        }
        
        .dex-status {
            display: flex;
            justify-content: space-between;
            background: var(--secondary);
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
        }
        
        .status-item {
            text-align: center;
            flex: 1;
        }
        
        .status-label {
            font-size: 12px;
            color: var(--text-secondary);
        }
        
        .status-value {
            font-size: 16px;
            font-weight: 600;
            color: var(--positive);
        }
        
        .real-trading-panel {
            background: var(--card-bg);
            border: 2px solid var(--positive);
            border-radius: 16px;
            padding: 25px;
            margin-top: 20px;
            box-shadow: 0 0 20px rgba(0, 209, 140, 0.3);
        /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫–æ—à–µ–ª—å–∫–∞ */
        .wallet-btn.connected {
            background: #00d18c;
        }
        
        .wallet-btn.connected:hover {
            background: #00b377;
        }
        
        /* –ê–Ω–∏–º–∞—Ü–∏—è –¥–ª—è —Å–ø–∏–Ω–Ω–µ—Ä–∞ */
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .fa-spin {
            animation: spin 1s linear infinite;
        }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="logo">
                <i class="fas fa-coins"></i>
                <span>ZUZCOIN Universe</span>
            </div>
            
            <nav class="nav">
                <a href="#" class="active"><i class="fas fa-chart-line"></i> Trade</a>
                <a href="#token-factory"><i class="fas fa-industry"></i> Token Factory</a>
                <a href="#digital-notary"><i class="fas fa-file-contract"></i> Digital Notary</a>
                <a href="#proofchain"><i class="fas fa-link"></i> ProofChain</a>
            </nav>
            
            <div style="display: flex; align-items: center; gap: 15px;">
                <div class="balance-container" id="balanceContainer" style="display: none;">
                    <div class="balance-item">
                        <div class="balance-label">ETH Balance</div>
                        <div class="balance-value eth" id="ethBalance">0.00 ETH</div>
                    </div>
                    <div class="balance-item">
                        <div class="balance-label">ZUZ Balance</div>
                        <div class="balance-value zuz" id="zuzBalance">0 ZUZ</div>
                    </div>
                    <div class="balance-item">
                        <div class="balance-label">Network</div>
                        <div class="balance-value" id="networkName">Not Connected</div>
                    </div>
                </div>
                
                <button class="wallet-btn" id="connectWalletBtn">
                    <i class="fas fa-wallet"></i>
                    <span>Connect Wallet</span>
                </button>
            </div>
        </header>

        <!-- –ë–∞–Ω–Ω–µ—Ä —Ä–µ–∞–ª—å–Ω–æ–≥–æ DEX -->
        <div class="real-dex-banner" id="realDexBanner" style="display: none;">
            <i class="fas fa-rocket"></i>
            <strong>üöÄ REAL DEX LIVE!</strong> ZUZIM DEX: 0x09970975aa48c718e17db4a18128ebf6806e1f2c
            <i class="fas fa-rocket"></i>
        </div>
        
        <!-- –°—Ç–∞—Ç—É—Å DEX -->
        <div class="dex-status" id="dexStatus" style="display: none;">
            <div class="status-item">
                <div class="status-label">DEX Contract</div>
                <div class="status-value">‚úÖ Deployed</div>
            </div>
            <div class="status-item">
                <div class="status-label">ZUZ/PYUSD Pair</div>
                <div class="status-value" id="pairStatus">Checking...</div>
            </div>
            <div class="status-item">
                <div class="status-label">Liquidity</div>
                <div class="status-value" id="liquidityStatus">Checking...</div>
            </div>
            <div class="status-item">
                <div class="status-label">1% Auto-Donate</div>
                <div class="status-value">‚úÖ Active</div>
            </div>
        </div>

        <div class="main-grid">
            <!-- –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: –ì—Ä–∞—Ñ–∏–∫ -->
            <div class="chart-container">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h3><i class="fas fa-chart-candlestick"></i> ZUZ/PYUSD Chart</h3>
                    <div style="display: flex; gap: 10px;">
                        <button style="padding: 6px 12px; background: var(--secondary); border: none; border-radius: 6px; color: var(--text); cursor: pointer;">1H</button>
                        <button style="padding: 6px 12px; background: var(--accent); border: none; border-radius: 6px; color: white; cursor: pointer;">1D</button>
                        <button style="padding: 6px 12px; background: var(--secondary); border: none; border-radius: 6px; color: var(--text); cursor: pointer;">1W</button>
                    </div>
                </div>
                <div id="tradingview_chart" style="height: 90%;"></div>
            </div>

            <!-- –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: –¢–æ—Ä–≥–æ–≤–∞—è –ø–∞–Ω–µ–ª—å -->
            <div class="real-trading-panel">
                <h3><i class="fas fa-exchange-alt"></i> REAL DEX Trading</h3>
                <p style="color: var(--text-secondary); margin-bottom: 20px;">
                    Trade ZUZ/PYUSD with 1% auto-donation to charity. Connected to real DEX contract.
                </p>
                
                <div class="tab-container">
                    <button class="tab active" onclick="switchTab('market')">Market</button>
                    <button class="tab" onclick="switchTab('limit')">Limit</button>
                    <button class="tab" onclick="switchTab('dex')">DEX Functions</button>
                </div>
                
                <div id="marketTab">
                    <div class="form-group">
                        <label class="form-label">Amount (ZUZ)</label>
                        <input type="number" class="form-input" id="amountInput" placeholder="0.00" step="0.01">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Price (PYUSD)</label>
                        <input type="number" class="form-input" id="priceInput" placeholder="0.0961" value="0.0961" step="0.0001">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Total (PYUSD)</label>
                        <input type="number" class="form-input" id="totalInput" placeholder="0.00" readonly>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin: 20px 0;">
                        <button class="btn-buy" onclick="placeRealOrder('buy')">
                            <i class="fas fa-arrow-up"></i> Buy ZUZ (Real DEX)
                        </button>
                        <button class="btn-sell" onclick="placeRealOrder('sell')">
                            <i class="fas fa-arrow-down"></i> Sell ZUZ (Real DEX)
                        </button>
                    </div>
                    
                    <div style="text-align: center; color: var(--text-secondary); font-size: 12px; margin-top: 20px;">
                        <i class="fas fa-hand-holding-heart"></i> 1% of every trade goes to charity automatically
                    </div>
                </div>
                
                <div id="dexTab" style="display: none;">
                    <h4><i class="fas fa-cogs"></i> DEX Management</h4>
                    
                    <div style="background: var(--secondary); padding: 15px; border-radius: 10px; margin: 15px 0;">
                        <p style="margin-bottom: 10px;"><strong>ZUZ/PYUSD Pair Status</strong></p>
                        <button class="btn-buy" onclick="checkPairStatus()" style="padding: 10px; width: 100%;">
                            <i class="fas fa-sync"></i> Check Pair Status
                        </button>
                        <div id="pairInfo" style="margin-top: 10px;"></div>
                    </div>
                    
                    <div style="background: var(--secondary); padding: 15px; border-radius: 10px; margin: 15px 0;">
                        <p style="margin-bottom: 10px;"><strong>Add Liquidity</strong></p>
                        <input type="number" class="form-input" id="liquidityZUZ" placeholder="ZUZ Amount" style="margin-bottom: 10px;">
                        <input type="number" class="form-input" id="liquidityPYUSD" placeholder="PYUSD Amount" style="margin-bottom: 10px;">
                        <button class="btn-buy" onclick="addLiquidity()" style="padding: 10px; width: 100%;">
                            <i class="fas fa-plus-circle"></i> Add Liquidity
                        </button>
                    </div>
                    
                    <div style="background: var(--secondary); padding: 15px; border-radius: 10px; margin: 15px 0;">
                        <p style="margin-bottom: 10px;"><strong>Real Swap</strong></p>
                        <input type="number" class="form-input" id="realSwapAmount" placeholder="Amount" style="margin-bottom: 10px;" value="10">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                            <button class="btn-buy" onclick="realSwap('ZUZtoPYUSD')">
                                ZUZ ‚Üí PYUSD
                            </button>
                            <button class="btn-sell" onclick="realSwap('PYUSDtoZUZ')">
                                PYUSD ‚Üí ZUZ
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –°–µ–∫—Ü–∏—è Token Factory -->
        <h2 class="section-title" id="token-factory">
            <i class="fas fa-industry"></i> Token Factory
        </h2>
        
        <div class="features-grid">
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-coins"></i>
                </div>
                <h4>Create Token</h4>
                <p>Deploy your own ERC20 token with custom name, symbol and supply</p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-percentage"></i>
                </div>
                <h4>Charity % Slider</h4>
                <p>Set automatic charity percentage for your token transactions</p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-chart-bar"></i>
                </div>
                <h4>Token Analytics</h4>
                <p>Track your token performance and transactions</p>
            </div>
        </div>

        <!-- –°–µ–∫—Ü–∏—è Digital Notary -->
        <h2 class="section-title" id="digital-notary">
            <i class="fas fa-file-contract"></i> Digital Notary
        </h2>
        
        <div class="features-grid">
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-upload"></i>
                </div>
                <h4>Upload Files</h4>
                <p>Securely timestamp and store documents on blockchain</p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-fingerprint"></i>
                </div>
                <h4>Create Hash</h4>
                <p>Generate unique cryptographic hash for your files</p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-check-circle"></i>
                </div>
                <h4>Verify Integrity</h4>
                <p>Prove file authenticity and timestamp</p>
            </div>
        </div>

        <!-- –°–µ–∫—Ü–∏—è ProofChain -->
        <h2 class="section-title" id="proofchain">
            <i class="fas fa-link"></i> ProofChain Ecosystem
        </h2>
        
        <div class="features-grid">
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-hand-holding-heart"></i>
                </div>
                <h4>Charity Tracking</h4>
                <p>Transparent tracking of all charity donations</p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-shield-alt"></i>
                </div>
                <h4>Secure Voting</h4>
                <p>Community governance and voting system</p>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-globe"></i>
                </div>
                <h4>Global Impact</h4>
                <p>Track real-world impact of donations</p>
            </div>
        </div>
    </div>

    <!-- –°–∫—Ä–∏–ø—Ç—ã -->
    <script src="https://unpkg.com/web3@1.7.0/dist/web3.min.js"></script>
    <script src="https://unpkg.com/ethers@5.7.0/dist/ethers.umd.min.js"></script>
    <script src="https://s3.tradingview.com/tv.js"></script>
    
    <script>
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ DEX
        const DEX_CONFIG = {
            address: "0x09970975aa48c718e17db4a18128ebf6806e1f2c",
            zuzToken: "0x4284ecC7E6E560cAfc0bA65CbDFc9c19bd2C0bD3",
            pyusdToken: "0xCaC524BcA292aaade2DF8A05cC58F0a65B1B3bB9",
            tradingFee: 0.3,
            charityFee: 1.0
        };
        
        // ABI –¥–ª—è DEX
        const DEX_ABI = [
            "function getSwapQuote(address tokenIn, address tokenOut, uint256 amountIn) view returns (uint256 amountOut, uint256 charityAmount)",
            "function swap(address tokenIn, address tokenOut, uint256 amountIn) returns (uint256)",
            "function getReserves(address tokenA, address tokenB) view returns (uint256 reserveA, uint256 reserveB)",
            "function charityWallet() view returns (address)",
            "function totalCharityDonated() view returns (uint256)"
        ];
        
        // ABI –¥–ª—è ERC20
        const ERC20_ABI = [
            "function approve(address spender, uint256 amount) returns (bool)",
            "function balanceOf(address account) view returns (uint256)",
            "function decimals() view returns (uint8)",
            "function transfer(address to, uint256 amount) returns (bool)"
        ];
        
        let provider, signer, userAddress;
        let dexContract, zuzContract, pyusdContract;
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è TradingView
        function initTradingView() {
            if (typeof TradingView === 'undefined') return;
            
            new TradingView.widget({
                "container_id": "tradingview_chart",
                "width": "100%",
                "height": "100%",
                "symbol": "ETHUSD",
                "interval": "D",
                "timezone": "exchange",
                "theme": "dark",
                "style": "1",
                "locale": "en",
                "toolbar_bg": "#0e1a2d",
                "enable_publishing": false,
                "hide_side_toolbar": false,
                "allow_symbol_change": true,
                "details": true,
                "studies": ["RSI@tv-basicstudies"],
                "show_popup_button": true,
                "popup_width": "1000",
                "popup_height": "650"
            });
        }
        
        // –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∞
        async function connectMetaMask() {
            if (typeof window.ethereum === 'undefined') {
                alert("Please install MetaMask!");
                return;
            }
            
            try {
                await window.ethereum.request({ method: 'eth_requestAccounts' });
                provider = new ethers.providers.Web3Provider(window.ethereum);
                signer = provider.getSigner();
                userAddress = await signer.getAddress();
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –±–∞–ª–∞–Ω—Å—ã
                document.getElementById('balanceContainer').style.display = 'flex';
                document.getElementById('connectWalletBtn').innerHTML = '<i class="fas fa-wallet"></i><span>Connected</span>';
                
                // –ó–∞–≥—Ä—É–∂–∞–µ–º –±–∞–ª–∞–Ω—Å—ã
                await loadBalances();
                
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Ä–µ–∞–ª—å–Ω—ã–π DEX
                await initRealDEX();
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –±–∞–Ω–Ω–µ—Ä DEX
                document.getElementById('realDexBanner').style.display = 'block';
                document.getElementById('dexStatus').style.display = 'flex';
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å –ø–∞—Ä—ã
                checkPairStatus();
                
            } catch (error) {
                alert("Error connecting wallet: " + error.message);
            }
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ DEX
        async function initRealDEX() {
            try {
                // –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã
                dexContract = new ethers.Contract(DEX_CONFIG.address, DEX_ABI, signer);
                zuzContract = new ethers.Contract(DEX_CONFIG.zuzToken, ERC20_ABI, signer);
                pyusdContract = new ethers.Contract(DEX_CONFIG.pyusdToken, ERC20_ABI, signer);
                
                console.log("‚úÖ Real DEX initialized");
                
            } catch (error) {
                console.error("Error initializing DEX:", error);
            }
        }
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ –±–∞–ª–∞–Ω—Å–æ–≤
        async function loadBalances() {
            try {
                // ETH –±–∞–ª–∞–Ω—Å
                const ethBalance = await provider.getBalance(userAddress);
                document.getElementById('ethBalance').textContent = 
                    ethers.utils.formatEther(ethBalance).substring(0, 8) + ' ETH';
                
                // ZUZ –±–∞–ª–∞–Ω—Å
                const zuzBalance = await zuzContract.balanceOf(userAddress);
                const zuzDecimals = await zuzContract.decimals();
                document.getElementById('zuzBalance').textContent = 
                    ethers.utils.formatUnits(zuzBalance, zuzDecimals).split('.')[0] + ' ZUZ';
                
                // –°–µ—Ç—å
                const network = await provider.getNetwork();
                document.getElementById('networkName').textContent = 
                    network.name.charAt(0).toUpperCase() + network.name.slice(1);
                
            } catch (error) {
                console.error("Error loading balances:", error);
            }
        }
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø–∞—Ä—ã
        async function checkPairStatus() {
            try {
                document.getElementById('pairStatus').textContent = "‚è≥ Checking...";
                document.getElementById('liquidityStatus').textContent = "‚è≥ Checking...";
                
                const reserves = await dexContract.getReserves(DEX_CONFIG.zuzToken, DEX_CONFIG.pyusdToken);
                
                const zuzDecimals = await zuzContract.decimals();
                const pyusdDecimals = await pyusdContract.decimals();
                
                const zuzReserve = ethers.utils.formatUnits(reserves[0], zuzDecimals);
                const pyusdReserve = ethers.utils.formatUnits(reserves[1], pyusdDecimals);
                
                document.getElementById('pairStatus').textContent = "‚úÖ Active";
                document.getElementById('liquidityStatus').textContent = 
                    `${parseFloat(zuzReserve).toFixed(2)} ZUZ / ${parseFloat(pyusdReserve).toFixed(2)} PYUSD`;
                
                document.getElementById('pairInfo').innerHTML = `
                    <div style="color: #00d18c;">
                        ‚úÖ Pair active<br>
                        ZUZ Reserve: ${parseFloat(zuzReserve).toFixed(2)}<br>
                        PYUSD Reserve: ${parseFloat(pyusdReserve).toFixed(2)}<br>
                        Price: 1 ZUZ = ${(pyusdReserve / zuzReserve).toFixed(4)} PYUSD
                    </div>
                `;
                
            } catch (error) {
                document.getElementById('pairStatus').textContent = "‚ùå Error";
                document.getElementById('liquidityStatus').textContent = "‚ùå Error";
                document.getElementById('pairInfo').innerHTML = `
                    <div style="color: #ff4d4d;">
                        ‚ùå Error checking pair: ${error.message}
                    </div>
                `;
            }
        }
        
        // –†–µ–∞–ª—å–Ω—ã–µ —Å–≤–∞–ø—ã
        async function placeRealOrder(type) {
            if (!signer) {
                alert("Connect wallet first!");
                return;
            }
            
            try {
                const amount = document.getElementById('amountInput').value;
                if (!amount || amount <= 0) {
                    alert("Enter amount!");
                    return;
                }
                
                const tokenIn = type === 'buy' ? DEX_CONFIG.pyusdToken : DEX_CONFIG.zuzToken;
                const tokenOut = type === 'buy' ? DEX_CONFIG.zuzToken : DEX_CONFIG.pyusdToken;
                const description = type === 'buy' ? "PYUSD ‚Üí ZUZ" : "ZUZ ‚Üí PYUSD";
                
                // –ü–æ–ª—É—á–∞–µ–º decimals
                const tokenInContract = new ethers.Contract(tokenIn, ERC20_ABI, signer);
                const decimals = await tokenInContract.decimals();
                const amountIn = ethers.utils.parseUnits(amount, decimals);
                
                // –î–∞–µ–º approve
                const approveTx = await tokenInContract.approve(DEX_CONFIG.address, amountIn);
                await approveTx.wait();
                
                // –ü–æ–ª—É—á–∞–µ–º –∫–æ—Ç–∏—Ä–æ–≤–∫—É
                const [quoteAmount, charityAmount] = await dexContract.getSwapQuote(tokenIn, tokenOut, amountIn);
                
                // –í—ã–ø–æ–ª–Ω—è–µ–º —Å–≤–∞–ø
                const swapTx = await dexContract.swap(tokenIn, tokenOut, amountIn);
                
                alert(`üöÄ ${description} swap sent!\nHash: ${swapTx.hash}\n1% going to charity.`);
                
                await swapTx.wait();
                
                alert(`‚úÖ Swap completed!\n1% donated to charity.`);
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –±–∞–ª–∞–Ω—Å—ã –∏ —Å—Ç–∞—Ç—É—Å
                await loadBalances();
                await checkPairStatus();
                
            } catch (error) {
                alert(`‚ùå Swap error: ${error.message}`);
            }
        }
        
        // –î—Ä—É–≥–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ DEX
        async function addLiquidity() {
            const zuzAmount = document.getElementById('liquidityZUZ').value;
            const pyusdAmount = document.getElementById('liquidityPYUSD').value;
            
            if (!zuzAmount || !pyusdAmount) {
                alert("Enter amounts!");
                return;
            }
            
            alert("Use the separate liquidity interface for now.");
        }
        
        async function realSwap(direction) {
            const amount = document.getElementById('realSwapAmount').value;
            if (!amount) {
                alert("Enter amount!");
                return;
            }
            
            const type = direction === 'ZUZtoPYUSD' ? 'sell' : 'buy';
            document.getElementById('amountInput').value = amount;
            await placeRealOrder(type);
        }
        
        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–∞–±–æ–≤
        function switchTab(tabName) {
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            event.target.classList.add('active');
            
            document.getElementById('marketTab').style.display = tabName === 'market' ? 'block' : 'none';
            document.getElementById('dexTab').style.display = tabName === 'dex' ? 'block' : 'none';
        }
        
        // –ê–≤—Ç–æ-–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.addEventListener('load', () => {
            initTradingView();
            
            if (typeof window.ethereum !== 'undefined' && window.ethereum.selectedAddress) {
                connectMetaMask();
            }
            
            
            // –ê–≤—Ç–æ-—Ä–∞—Å—á–µ—Ç total
            document.getElementById('amountInput').addEventListener('input', updateTotal);
            document.getElementById('priceInput').addEventListener('input', updateTotal);
        });
        
        function updateTotal() {
            const amount = parseFloat(document.getElementById('amountInput').value) || 0;
            const price = parseFloat(document.getElementById('priceInput').value) || 0;
            document.getElementById('totalInput').value = (amount * price).toFixed(4);
        }
    </script>
<script>
// –ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –î–õ–Ø ZUZCOIN
document.addEventListener('DOMContentLoaded', function() {
    console.log("ZUZCOIN Universe initialized");
    
    // –ù–∞–∑–Ω–∞—á–∞–µ–º –∫–Ω–æ–ø–∫–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫
    const connectBtn = document.getElementById('connectWalletBtn');
    if (connectBtn) {
        console.log("‚úÖ Connect button found");
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –µ—Å–ª–∏ —É–∂–µ –µ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏—è showWalletModal
        if (typeof showWalletModal === 'function') {
            connectBtn.onclick = showWalletModal;
            console.log("Button handler set to showWalletModal");
        } else {
            console.log("showWalletModal not found, using fallback");
            connectBtn.onclick = function() {
                alert("Please wait for wallet functions to load...");
            };
        }
    } else {
    }
    
    // –ê–≤—Ç–æ-–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –µ—Å–ª–∏ —É–∂–µ –ø–æ–¥–∫–ª—é—á–µ–Ω –≤ MetaMask
    if (typeof window.ethereum !== 'undefined' && window.ethereum.selectedAddress) {
        console.log("Already connected to MetaMask");
        setTimeout(() => {
            if (typeof connectMetaMask === 'function') {
                connectMetaMask();
            }
        }, 1500);
    }
    
    console.log("‚úÖ Initialization complete");
});
</script>
<script src="wallet_connector.js"></script>
</body>
</html>
