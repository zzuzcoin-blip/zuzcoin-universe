<!DOCTYPE html>
<html>
<head>
    <title>Minimal Wallet Test</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { padding: 50px; background: #0e1a2d; color: white; font-family: Arial; }
        button { 
            background: #00c3ff;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 18px;
            cursor: pointer;
            margin: 20px;
        }
        .connected { background: #00d18c; }
    </style>
</head>
<body>
    <h1>Minimal Wallet Connection Test</h1>
    
    <button id="connectWalletBtn">
        <i class="fas fa-wallet"></i> Connect Wallet
    </button>
    
    <div id="balanceContainer" style="display: none; margin-top: 20px; padding: 15px; background: #1a2b44; border-radius: 10px;">
        <div>ETH: <span id="ethBalance">0.00</span></div>
        <div>ZUZ: <span id="zuzBalance">0</span></div>
        <div>Network: <span id="networkName">-</span></div>
    </div>
    
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º ethers.js -->
    <script src="https://unpkg.com/ethers@5.7.0/dist/ethers.umd.min.js"></script>
    
    <!-- –ù–∞—à –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π wallet connector -->
    <script>
    // –£–ü–†–û–©–ï–ù–ù–´–ô –†–ê–ë–û–ß–ò–ô –ö–û–ù–ù–ï–ö–¢–û–†
    console.log("üîß Minimal wallet connector loading...");
    
    function showWalletModal() {
        console.log("Button clicked!");
        
        const modalHTML = `
        <div id="walletModal" style="
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8); display: flex; align-items: center;
            justify-content: center; z-index: 9999;
        ">
            <div style="background: #0e1a2d; padding: 30px; border-radius: 16px; width: 400px;">
                <h3 style="color: white;">Connect Wallet</h3>
                <div onclick="connectMetaMask()" style="
                    padding: 15px; background: #1a2b44; border-radius: 10px;
                    cursor: pointer; margin: 10px 0; color: white;
                ">
                    <i class="fab fa-ethereum"></i> MetaMask
                </div>
                <button onclick="document.getElementById('walletModal').remove()" style="
                    width: 100%; padding: 10px; background: #2a3b54;
                    border: none; border-radius: 10px; color: white; cursor: pointer;
                ">
                    Cancel
                </button>
            </div>
        </div>`;
        
        // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–π –º–æ–¥–∞–ª
        const oldModal = document.getElementById('walletModal');
        if (oldModal) oldModal.remove();
        
        // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–π
        document.body.insertAdjacentHTML('beforeend', modalHTML);
    }
    
    async function connectMetaMask() {
        console.log("Connecting to MetaMask...");
        
        if (typeof window.ethereum === 'undefined') {
            alert('Please install MetaMask!');
            return;
        }
        
        try {
            const btn = document.getElementById('connectWalletBtn');
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Connecting...';
            
            const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
            const address = accounts[0];
            
            // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª
            const modal = document.getElementById('walletModal');
            if (modal) modal.remove();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É
            btn.innerHTML = '<i class="fas fa-check-circle"></i> ' + 
                           address.substring(0,6) + '...' + address.substring(38);
            btn.classList.add('connected');
            btn.onclick = disconnectWallet;
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –±–∞–ª–∞–Ω—Å—ã
            document.getElementById('balanceContainer').style.display = 'block';
            
            console.log("‚úÖ Connected:", address);
            
        } catch (error) {
            console.error("Error:", error);
            alert("Connection failed: " + error.message);
            document.getElementById('connectWalletBtn').innerHTML = '<i class="fas fa-wallet"></i> Connect Wallet';
        }
    }
    
    function disconnectWallet() {
        console.log("Disconnecting...");
        const btn = document.getElementById('connectWalletBtn');
        btn.innerHTML = '<i class="fas fa-wallet"></i> Connect Wallet';
        btn.classList.remove('connected');
        btn.onclick = showWalletModal;
        document.getElementById('balanceContainer').style.display = 'none';
    }
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    document.addEventListener('DOMContentLoaded', function() {
        console.log("DOM loaded");
        const btn = document.getElementById('connectWalletBtn');
        if (btn) {
            btn.onclick = showWalletModal;
            console.log("Button handler set");
        }
        
        // –ê–≤—Ç–æ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
        if (window.ethereum && window.ethereum.selectedAddress) {
            console.log("Already connected, updating UI...");
            setTimeout(() => {
                const address = window.ethereum.selectedAddress;
                const btn = document.getElementById('connectWalletBtn');
                if (btn) {
                    btn.innerHTML = '<i class="fas fa-check-circle"></i> ' + 
                                   address.substring(0,6) + '...' + address.substring(38);
                    btn.classList.add('connected');
                    btn.onclick = disconnectWallet;
                    document.getElementById('balanceContainer').style.display = 'block';
                }
            }, 500);
        }
    });
    </script>
</body>
</html>
