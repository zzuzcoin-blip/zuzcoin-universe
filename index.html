<!DOCTYPE html>
<html>
<head>
    <title>ProofChain - –¶–∏—Ñ—Ä–æ–≤–æ–π –Ω–æ—Ç–∞—Ä–∏—É—Å</title>
    <style>
        body {
            font-family: Arial;
            background: #1e3c72;
            margin: 0;
            padding: 20px;
            color: #333;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
        }
        header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }
        h1 {
            font-size: 2em;
        }
        .card {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
        }
        input, textarea, button {
            width: 100%;
            padding: 10px;
            margin: 5px 0;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        button {
            background: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }
        .proof-card {
            background: #e8f5e8;
            padding: 15px;
            margin: 10px 0;
            border-left: 4px solid #4CAF50;
        }
        .balance {
            background: gold;
            padding: 10px;
            text-align: center;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>‚öñÔ∏è ProofChain</h1>
            <p>–¶–∏—Ñ—Ä–æ–≤–æ–π –Ω–æ—Ç–∞—Ä–∏—É—Å –¥–ª—è —Ç–≤–æ—Ä—Ü–æ–≤ ‚Ä¢ 100 —Ä—É–±–ª–µ–π –∑–∞ —Ñ–∏–∫—Å–∞—Ü–∏—é</p>
        </header>

        <div class="card">
            <h2>üë§ –í–∞—à –∞–∫–∫–∞—É–Ω—Ç</h2>
            <input type="text" id="userId" value="demo-user" placeholder="–í–∞—à ID">
            <div class="balance" id="balanceDisplay">–ë–∞–ª–∞–Ω—Å: 1000 —Ä—É–±</div>
            <input type="number" id="addAmount" placeholder="–°—É–º–º–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è">
            <button onclick="addBalance()">üí≥ –ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å</button>
        </div>

        <div class="card">
            <h2>üìù –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –∞–≤—Ç–æ—Ä—Å—Ç–≤–æ - 100 —Ä—É–±</h2>
            <input type="text" id="creativeWork" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è">
            <textarea id="description" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ" rows="3"></textarea>
            <button onclick="registerProof()">üìå –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –≤ –±–ª–æ–∫—á–µ–π–Ω–µ</button>
        </div>

        <div class="card">
            <h2>üîó –í–∞—à–∏ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞</h2>
            <button onclick="loadMyProofs()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
            <div id="proofsList"></div>
        </div>
    </div>

    <script>
        async function addBalance() {
            const userId = document.getElementById('userId').value;
            const amount = document.getElementById('addAmount').value;
            
            if (!amount) {
                alert('–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É');
                return;
            }

            try {
                const response = await fetch('/api/add-balance', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({ userId: userId, amount: amount })
                });
                
                const result = await response.json();
                alert(result.message);
                document.getElementById('balanceDisplay').textContent = `–ë–∞–ª–∞–Ω—Å: ${result.newBalance} —Ä—É–±`;
                document.getElementById('addAmount').value = '';
            } catch (error) {
                alert('–û—à–∏–±–∫–∞: ' + error);
            }
        }

        async function registerProof() {
            const userId = document.getElementById('userId').value;
            const work = document.getElementById('creativeWork').value;
            
            if (!work) {
                alert('–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è');
                return;
            }

            try {
                const response = await fetch('/api/register-proof', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({
                        userId: userId,
                        creativeWork: work,
                        description: document.getElementById('description').value
                    })
                });
                
                const result = await response.json();
                
                if (result.success) {
                    alert(result.message + '\n–û—Å—Ç–∞—Ç–æ–∫: ' + result.balance + ' —Ä—É–±');
                    document.getElementById('creativeWork').value = '';
                    document.getElementById('description').value = '';
                    document.getElementById('balanceDisplay').textContent = `–ë–∞–ª–∞–Ω—Å: ${result.balance} —Ä—É–±`;
                    loadMyProofs();
                } else {
                    alert('–û—à–∏–±–∫–∞: ' + result.error);
                }
            } catch (error) {
                alert('–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ' + error);
            }
        }

        async function loadMyProofs() {
            const userId = document.getElementById('userId').value;
            
            try {
                const response = await fetch('/api/proofs/' + userId);
                const data = await response.json();
                
                let html = '';
                data.proofs.forEach(proof => {
                    html += `<div class="proof-card">
                        <strong>${proof.creativeWork}</strong><br>
                        ${proof.description || ''}<br>
                        ‚è∞ ${new Date(proof.timestamp).toLocaleString()}<br>
                        üí∞ ${proof.cost} —Ä—É–±<br>
                        üîó ${proof.blockHash.substr(0, 20)}...
                    </div>`;
                });
                
                document.getElementById('proofsList').innerHTML = html || '–ü–æ–∫–∞ –Ω–µ—Ç –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤';
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞:', error);
            }
        }

        loadMyProofs();
    </script>
</body>
</html>
